import{r as t,c as i,h as n,g as e,F as o}from"./p-85482247.js";import{S as s,a,e as r,E as d,C as m,A as l,R as h,b as c,Q as u,L as p,c as y,d as v,f as b,U as g,M as x,T as k,g as f,h as T,D as w,i as F,B as _,j as C}from"./p-b0f00905.js";function $(t,i,n,e,o=!1){let s=Number(t).toFixed(2),a=(null==i?void 0:i.moneyInEmailsFormat)||"{{amount}}";(null==n?void 0:n.active)&&(o||n.active!==e)&&(a=M[n.active].moneyWithCurrencyFormat);const r=a.replace(/\s/g,""),d={"{{amount}}":D,"{{amount_with_comma_separator}}":t=>S(t.replace(".",",")),"{{amount_no_decimals}}":t=>D(Math.round(Number(t))),"{{amount_no_decimals_with_comma_separator}}":t=>S(`${Math.round(Number(t))}`),"{{amount_with_apostrophe_separator}}":z,"{{amount_no_decimals_with_space_separator}}":t=>R(`${Math.round(Number(t))}`),"{{amount_with_space_separator}}":t=>R(t.replace(".",",")),"{{amount_with_period_and_space_separator}}":R},m=Object.keys(d).find((t=>r.includes(t))),l=m?d[m](s):s;return r.replace(/\{\{.*?\}\}/,l).replace(/<[^>]*>/g,"")}function W(t,i){const[n,e]=t.toString().split("."),o=n.replace(/\B(?=(\d{3})+(?!\d))/g,i);return e?`${o}.${e}`:o}function S(t){return W(t,".")}function D(t){return W(t,",")}function z(t){return W(t,"'")}function R(t){return W(t," ")}const M={AED:{moneyFormat:"Dhs. {{amount}}",moneyWithCurrencyFormat:"Dhs. {{amount}} AED"},AFN:{moneyFormat:"{{amount}}؋",moneyWithCurrencyFormat:"{{amount}}؋ AFN"},ALL:{moneyFormat:"Lek {{amount}}",moneyWithCurrencyFormat:"Lek {{amount}} ALL"},AMD:{moneyFormat:"{{amount}} AMD",moneyWithCurrencyFormat:"{{amount}} AMD"},ANG:{moneyFormat:"ƒ;{{amount}}",moneyWithCurrencyFormat:"{{amount}} NAƒ;"},AOA:{moneyFormat:"Kz{{amount}}",moneyWithCurrencyFormat:"Kz{{amount}} AOA"},ARS:{moneyFormat:"${{amount_with_comma_separator}}",moneyWithCurrencyFormat:"${{amount_with_comma_separator}} ARS"},AUD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} AUD"},AWG:{moneyFormat:"Afl{{amount}}",moneyWithCurrencyFormat:"Afl{{amount}} AWG"},AZN:{moneyFormat:"m.{{amount}}",moneyWithCurrencyFormat:"m.{{amount}} AZN"},BAM:{moneyFormat:"KM {{amount_with_comma_separator}}",moneyWithCurrencyFormat:"KM {{amount_with_comma_separator}} BAM"},BBD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} Bds"},BDT:{moneyFormat:"Tk {{amount}}",moneyWithCurrencyFormat:"Tk {{amount}} BDT"},BGN:{moneyFormat:"{{amount}} лв",moneyWithCurrencyFormat:"{{amount}} лв BGN"},BIF:{moneyFormat:"FBu. {{amount_no_decimals}}",moneyWithCurrencyFormat:"FBu. {{amount_no_decimals}} BIF"},BMD:{moneyFormat:"BD${{amount}}",moneyWithCurrencyFormat:"BD${{amount}} BMD"},BND:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} BND"},BOB:{moneyFormat:"Bs{{amount_with_comma_separator}}",moneyWithCurrencyFormat:"Bs{{amount_with_comma_separator}} BOB"},BRL:{moneyFormat:"R$ {{amount_with_comma_separator}}",moneyWithCurrencyFormat:"R$ {{amount_with_comma_separator}} BRL"},BSD:{moneyFormat:"BS${{amount}}",moneyWithCurrencyFormat:"BS${{amount}} BSD"},BWP:{moneyFormat:"P{{amount}}",moneyWithCurrencyFormat:"P{{amount}} BWP"},BZD:{moneyFormat:"BZ${{amount}}",moneyWithCurrencyFormat:"BZ${{amount}} BZD"},CAD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} CAD"},CDF:{moneyFormat:"FC{{amount}}",moneyWithCurrencyFormat:"FC{{amount}} CDF"},CHF:{moneyFormat:"CHF {{amount}}",moneyWithCurrencyFormat:"CHF {{amount}}"},CLP:{moneyFormat:"${{amount_no_decimals_with_comma_separator}}",moneyWithCurrencyFormat:"${{amount_no_decimals_with_comma_separator}} CLP"},CNY:{moneyFormat:"¥{{amount}}",moneyWithCurrencyFormat:"¥{{amount}} CNY"},COP:{moneyFormat:"${{amount_with_comma_separator}}",moneyWithCurrencyFormat:"${{amount_with_comma_separator}} COP"},CRC:{moneyFormat:"₡ {{amount_with_comma_separator}}",moneyWithCurrencyFormat:"₡ {{amount_with_comma_separator}} CRC"},CVE:{moneyFormat:"{{amount_with_space_separator}}$",moneyWithCurrencyFormat:"{{amount_with_space_separator}}$ CVE"},CZK:{moneyFormat:"{{amount_with_comma_separator}} Kč",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} Kč"},DJF:{moneyFormat:"{{amount_no_decimals_with_comma_separator}} Fdj",moneyWithCurrencyFormat:"{{amount_no_decimals_with_comma_separator}} DJF"},DKK:{moneyFormat:"{{amount_with_comma_separator}} kr",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} DKK"},DOP:{moneyFormat:"RD$ {{amount}}",moneyWithCurrencyFormat:"RD$ {{amount}}"},DZD:{moneyFormat:"DA {{amount}}",moneyWithCurrencyFormat:"DA {{amount}} DZD"},EGP:{moneyFormat:"LE {{amount}}",moneyWithCurrencyFormat:"LE {{amount}} EGP"},ETB:{moneyFormat:"Br{{amount}}",moneyWithCurrencyFormat:"Br{{amount}} ETB"},EUR:{moneyFormat:"€{{amount_with_comma_separator}}",moneyWithCurrencyFormat:"€{{amount_with_comma_separator}} EUR"},FJD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"FJ${{amount}}"},FKP:{moneyFormat:"£{{amount}}",moneyWithCurrencyFormat:"£{{amount}} FKP"},GBP:{moneyFormat:"£{{amount}}",moneyWithCurrencyFormat:"£{{amount}} GBP"},GEL:{moneyFormat:"{{amount}} GEL",moneyWithCurrencyFormat:"{{amount}} GEL"},GIP:{moneyFormat:"£{{amount}}",moneyWithCurrencyFormat:"£{{amount}} GIP"},GMD:{moneyFormat:"D {{amount}}",moneyWithCurrencyFormat:"D {{amount}} GMD"},GNF:{moneyFormat:"FG {{amount_no_decimals}}",moneyWithCurrencyFormat:"FG {{amount_no_decimals}} GNF"},GTQ:{moneyFormat:"Q{{amount}}",moneyWithCurrencyFormat:"{{amount}} GTQ"},GYD:{moneyFormat:"G${{amount}}",moneyWithCurrencyFormat:"${{amount}} GYD"},HKD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"HK${{amount}}"},HNL:{moneyFormat:"L {{amount}}",moneyWithCurrencyFormat:"L {{amount}} HNL"},HRK:{moneyFormat:"{{amount_with_comma_separator}} kn",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} kn HRK"},HTG:{moneyFormat:"G {{amount}}",moneyWithCurrencyFormat:"{{amount}} HTG"},HUF:{moneyFormat:"{{amount_no_decimals_with_comma_separator}}",moneyWithCurrencyFormat:"{{amount_no_decimals_with_comma_separator}} Ft"},IDR:{moneyFormat:"Rp {{amount_with_comma_separator}}",moneyWithCurrencyFormat:"Rp {{amount_with_comma_separator}} IDR"},ILS:{moneyFormat:"{{amount}} NIS",moneyWithCurrencyFormat:"{{amount}} NIS"},INR:{moneyFormat:"Rs. {{amount}}",moneyWithCurrencyFormat:"Rs. {{amount}}"},ISK:{moneyFormat:"{{amount_no_decimals_with_comma_separator}} kr",moneyWithCurrencyFormat:"{{amount_no_decimals_with_comma_separator}} ISK"},JMD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} JMD"},JPY:{moneyFormat:"¥{{amount_no_decimals}}",moneyWithCurrencyFormat:"¥{{amount_no_decimals}} JPY"},KES:{moneyFormat:"KSh{{amount}}",moneyWithCurrencyFormat:"KSh{{amount}}"},KGS:{moneyFormat:"лв{{amount}}",moneyWithCurrencyFormat:"лв{{amount}}"},KHR:{moneyFormat:"KHR{{amount}}",moneyWithCurrencyFormat:"KHR{{amount}}"},KMF:{moneyFormat:"{{amount_no_decimals_with_comma_separator}} CF",moneyWithCurrencyFormat:"{{amount_no_decimals_with_comma_separator}} CF"},KRW:{moneyFormat:"₩{{amount_no_decimals}}",moneyWithCurrencyFormat:"₩{{amount_no_decimals}} KRW"},KYD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} KYD"},KZT:{moneyFormat:"{{amount}} KZT",moneyWithCurrencyFormat:"{{amount}} KZT"},LAK:{moneyFormat:"₭{{amount}}",moneyWithCurrencyFormat:"₭{{amount}} LAK"},LBP:{moneyFormat:"L£{{amount}}",moneyWithCurrencyFormat:"L£{{amount}} LBP"},LKR:{moneyFormat:"Rs {{amount}}",moneyWithCurrencyFormat:"Rs {{amount}} LKR"},LRD:{moneyFormat:"L${{amount}}",moneyWithCurrencyFormat:"L${{amount}} LRD"},LSL:{moneyFormat:"M{{amount}}",moneyWithCurrencyFormat:"M{{amount}} LSL"},MAD:{moneyFormat:"{{amount}} dh",moneyWithCurrencyFormat:"Dh {{amount}} MAD"},MDL:{moneyFormat:"{{amount}} MDL",moneyWithCurrencyFormat:"{{amount}} MDL"},MKD:{moneyFormat:"ден {{amount}}",moneyWithCurrencyFormat:"ден {{amount}} MKD"},MMK:{moneyFormat:"K{{amount}}",moneyWithCurrencyFormat:"K{{amount}} MMK"},MNT:{moneyFormat:"{{amount_no_decimals}} ₮",moneyWithCurrencyFormat:"{{amount_no_decimals}} MNT"},MOP:{moneyFormat:"MOP${{amount}}",moneyWithCurrencyFormat:"MOP${{amount}}"},MUR:{moneyFormat:"Rs {{amount}}",moneyWithCurrencyFormat:"Rs {{amount}} MUR"},MVR:{moneyFormat:"Rf{{amount}}",moneyWithCurrencyFormat:"Rf{{amount}} MRf"},MWK:{moneyFormat:"Mk{{amount}}",moneyWithCurrencyFormat:"Mk{{amount}} MWK"},MXN:{moneyFormat:"$ {{amount}}",moneyWithCurrencyFormat:"$ {{amount}} MXN"},MYR:{moneyFormat:"RM{{amount}} MYR",moneyWithCurrencyFormat:"RM{{amount}} MYR"},MZN:{moneyFormat:"{{amount}} Mt",moneyWithCurrencyFormat:"Mt {{amount}} MZN"},NAD:{moneyFormat:"N${{amount}}",moneyWithCurrencyFormat:"N${{amount}} NAD"},NGN:{moneyFormat:"₦{{amount}}",moneyWithCurrencyFormat:"₦{{amount}} NGN"},NIO:{moneyFormat:"C${{amount}}",moneyWithCurrencyFormat:"C${{amount}} NIO"},NOK:{moneyFormat:"{{amount_with_comma_separator}} kr",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} NOK"},NPR:{moneyFormat:"Rs{{amount}}",moneyWithCurrencyFormat:"Rs{{amount}} NPR"},NZD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} NZD"},PAB:{moneyFormat:"B/. {{amount}}",moneyWithCurrencyFormat:"B/. {{amount}} PAB"},PEN:{moneyFormat:"S/. {{amount}}",moneyWithCurrencyFormat:"S/. {{amount}} PEN"},PGK:{moneyFormat:"K {{amount}}",moneyWithCurrencyFormat:"K {{amount}} PGK"},PHP:{moneyFormat:"₱{{amount}}",moneyWithCurrencyFormat:"₱{{amount}} PHP"},PKR:{moneyFormat:"Rs.{{amount}}",moneyWithCurrencyFormat:"Rs.{{amount}} PKR"},PLN:{moneyFormat:"{{amount_with_comma_separator}} zl",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} zl PLN"},PYG:{moneyFormat:"Gs. {{amount_no_decimals_with_comma_separator}}",moneyWithCurrencyFormat:"Gs. {{amount_no_decimals_with_comma_separator}} PYG"},QAR:{moneyFormat:"QAR {{amount_with_comma_separator}}",moneyWithCurrencyFormat:"QAR {{amount_with_comma_separator}}"},RON:{moneyFormat:"{{amount_with_comma_separator}} lei",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} lei RON"},RSD:{moneyFormat:"{{amount}} RSD",moneyWithCurrencyFormat:"{{amount}} RSD"},RUB:{moneyFormat:"руб{{amount_with_comma_separator}}",moneyWithCurrencyFormat:"руб{{amount_with_comma_separator}} RUB"},RWF:{moneyFormat:"{{amount_no_decimals}} RF",moneyWithCurrencyFormat:"{{amount_no_decimals}} RWF"},SAR:{moneyFormat:"{{amount}} SR",moneyWithCurrencyFormat:"{{amount}} SAR"},SBD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} SBD"},SCR:{moneyFormat:"Rs {{amount}}",moneyWithCurrencyFormat:"Rs {{amount}} SCR"},SEK:{moneyFormat:"{{amount_no_decimals_with_space_separator}} kr",moneyWithCurrencyFormat:"{{amount_no_decimals_with_space_separator}} SEK"},SGD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} SGD"},SHP:{moneyFormat:"£{{amount}}",moneyWithCurrencyFormat:"£{{amount}} SHP"},SLL:{moneyFormat:"Le {{amount}}",moneyWithCurrencyFormat:"Le {{amount}} SLL"},SRD:{moneyFormat:"SRD {{amount_with_comma_separator}}",moneyWithCurrencyFormat:"SRD {{amount_with_comma_separator}}"},STD:{moneyFormat:"Db {{amount}}",moneyWithCurrencyFormat:"Db {{amount}} STD"},SZL:{moneyFormat:"L {{amount}}",moneyWithCurrencyFormat:"L {{amount}} SZL"},THB:{moneyFormat:"{{amount}} ฿",moneyWithCurrencyFormat:"{{amount}} ฿ THB"},TJS:{moneyFormat:"TJS {{amount}}",moneyWithCurrencyFormat:"TJS {{amount}}"},TOP:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} TOP"},TRY:{moneyFormat:"{{amount}}TL",moneyWithCurrencyFormat:"{{amount}}TL"},TTD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} TTD"},TWD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} TWD"},TZS:{moneyFormat:"{{amount}} TZS",moneyWithCurrencyFormat:"{{amount}} TZS"},UAH:{moneyFormat:"₴{{amount}}",moneyWithCurrencyFormat:"₴{{amount}} UAH"},UGX:{moneyFormat:"Ush {{amount_no_decimals}}",moneyWithCurrencyFormat:"Ush {{amount_no_decimals}} UGX"},USD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"${{amount}} USD"},UYU:{moneyFormat:"${{amount_with_comma_separator}}",moneyWithCurrencyFormat:"${{amount_with_comma_separator}} UYU"},UZS:{moneyFormat:"{{amount_no_decimals_with_space_separator}} som",moneyWithCurrencyFormat:"{{amount_no_decimals_with_space_separator}} UZS"},VND:{moneyFormat:"{{amount_no_decimals_with_comma_separator}}₫",moneyWithCurrencyFormat:"{{amount_no_decimals_with_comma_separator}} VND"},VUV:{moneyFormat:"${{amount_no_decimals}}",moneyWithCurrencyFormat:"${{amount_no_decimals}}VT"},WST:{moneyFormat:"WS$ {{amount}}",moneyWithCurrencyFormat:"WS$ {{amount}} WST"},XAF:{moneyFormat:"FCFA{{amount_no_decimals}}",moneyWithCurrencyFormat:"FCFA{{amount_no_decimals}} XAF"},XCD:{moneyFormat:"${{amount}}",moneyWithCurrencyFormat:"EC${{amount}}"},XOF:{moneyFormat:"CFA{{amount_no_decimals}}",moneyWithCurrencyFormat:"CFA{{amount_no_decimals}} XOF"},XPF:{moneyFormat:"{{amount_no_decimals_with_space_separator}} XPF",moneyWithCurrencyFormat:"{{amount_no_decimals_with_space_separator}} XPF"},YER:{moneyFormat:"{{amount_with_comma_separator}} YER",moneyWithCurrencyFormat:"{{amount_with_comma_separator}} YER"},ZAR:{moneyFormat:"R {{amount}}",moneyWithCurrencyFormat:"R {{amount}} ZAR"},ZMW:{moneyFormat:"K{{amount_no_decimals_with_comma_separator}}",moneyWithCurrencyFormat:"ZMW{{amount_no_decimals_with_comma_separator}}"}},B=class{constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.cards=void 0,this.translation=void 0,this.locale="default",this.device="desktop",this.shopCurrencyFormats=void 0,this.isStickAddToCartEnabled=!1,this.presentmentCurrency=void 0,this.shopCurrencyCode=void 0,this.productDetails=[],this.isSimulator=!1,this.messageId=void 0,this.isAdmin=!1,this.storeId=void 0,this.selectedVariants=[],this.selectedProducts=[],this.bundleProductsDetails=[],this.showLoaderOnAddToCart=!1,this.isDescriptionExpanded=[],this.showSkeleton=!1}componentWillRender(){this.updateCardsWithProductDetails(this.productDetails)}componentDidLoad(){this.aiChatEvents.emit({type:"bundleLayoutRendered",element:this.refElement})}updateCardsWithProductDetails(t){if(t&&t.length){let i=JSON.parse(JSON.stringify(this.cards));for(let n of i){const i=t.find((t=>t.id===n.id));i&&(n.imageUrl=i.imageUrl,n.title={text:i.title,type:"text"},n.variants=i.variants,n.price=i.variants[0].price)}JSON.stringify(this.cards)!==JSON.stringify(i)&&(this.selectedProducts=[],this.selectedVariants=[],this.handleShowSkeleton(!1)),this.cards=i}}async getProductsDetails(){return this.handleShowSkeleton(!0),this.cards}async handleShowSkeleton(t){this.showSkeleton=t}handleOnLoader(t){var i,n,e,o;let s=null===(n=null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.response)||void 0===n?void 0:n.items;this.showLoaderOnAddToCart=!1,document.dispatchEvent(new CustomEvent("askTimmyToastMessage",{detail:{type:"success",status:"show",message:null===(o=null===(e=this.translation)||void 0===e?void 0:e.addedToCart)||void 0===o?void 0:o.replace("{{count}}",s.length.toString())}}))}async handleOnVariantChange(t,i,n){const e=n.find((t=>Number(t.id)===Number(i)));let o=this.selectedVariants||[];if(o.find((i=>i.id===e.id&&i.index===t)))return;o.find((i=>i.index===t))&&(o=o.filter((i=>i.index!==t))),o.push(Object.assign(Object.assign({},e),{index:t})),this.selectedVariants=[...o];let s=await this.getBundleProductsDetails();this.aiChatEvents.emit({type:"bundleVariantSelection",payload:s})}async handleOnProductSelect(t,i){let n=this.selectedProducts||[];if(n.find((i=>i.index===t))){if(1===n.length)return;n=n.filter((i=>i.index!==t))}else n.push(Object.assign(Object.assign({},i),{index:t}));this.selectedProducts=[...n];let e=await this.getBundleProductsDetails();this.aiChatEvents.emit({type:"bundleProductSelection",payload:e})}getTotalPrice(){return this.selectedProducts.reduce(((t,i)=>{const n=this.selectedVariants.find((t=>t.index===i.index));return t+Number((null==n?void 0:n.price)||0)}),0)}async handleOnAddToCart(){let t=await this.getBundleProductsDetails();t=t.map((t=>({id:t.id,quantity:1}))),this.showLoaderOnAddToCart=!0,this.aiChatEvents.emit({type:"addToCart",payload:t,messageId:this.messageId})}async getBundleProductsDetails(){var t,i;return this.showLoaderOnAddToCart=!1,(null===(t=this.selectedProducts)||void 0===t?void 0:t.length)&&(null===(i=this.selectedVariants)||void 0===i?void 0:i.length)?(this.bundleProductsDetails=this.selectedProducts.map((t=>{const i=this.selectedVariants.find((i=>i.index===t.index));return{id:i.id,quantity:1,imageUrl:i.imageUrl||t.imageUrl,price:Number(i.price),title:t.title}})),this.bundleProductsDetails):[]}toggleDescription(t){const i=[...this.isDescriptionExpanded];i[t]=!i[t],this.isDescriptionExpanded=i}loadSkeleton(){return n("div",{class:"askTimmy-bundle-skeleton-loading-container"},n(s,{width:"75px",height:"75px",borderRadius:"10px"}),n("div",{class:"askTimmy-bundle-skeleton-loading-content"},n("div",{class:"askTimmy-bundle-title-skeleton-loading"},n(s,{width:"90%",height:"8px",borderRadius:"10px"}),n(s,{width:"70%",height:"8px",borderRadius:"10px"})),n(s,{width:"40%",height:"30px",borderRadius:"8px"})))}render(){var t,i,e,o,h,c,u,p;return 0===(null===(t=this.selectedVariants)||void 0===t?void 0:t.length)&&(null===(i=this.cards)||void 0===i?void 0:i.length)&&(this.selectedVariants=this.cards.map(((t,i)=>Object.assign(Object.assign({},null==t?void 0:t.variants[0]),{index:i})))),0===(null===(e=this.selectedProducts)||void 0===e?void 0:e.length)&&(null===(o=this.cards)||void 0===o?void 0:o.length)&&(this.selectedProducts=this.cards.map(((t,i)=>Object.assign(Object.assign({},t),{index:i})))),0===(null===(h=this.bundleProductsDetails)||void 0===h?void 0:h.length)&&this.getBundleProductsDetails(),n("div",{key:"1dbd84d52531e987bcdc3eaeeba6bf2bb6c16318",class:"askTimmy-bundle-layout-container system askTimmy-message askTimmy-border-radius-2"},n("div",{key:"40d985fcbdf1b6a27957e51ebaa3851864c040aa",class:"askTimmy-bundle-header"},n("div",{key:"fb15a00abf009cd7d2db3d8f369e1bd1e3c2ec0a",class:"askTimmy-bundle-title"},null===(c=this.translation)||void 0===c?void 0:c.title)),this.cards&&this.cards.length&&n("div",{key:"6fc0b3e53139108a6b69301b64c5e884c32eb38e",class:"askTimmy-bundle-cards"},this.cards.map((({imageUrl:t,title:i,purpose:e,variants:o,price:s,url:a,filteredVariant:h},c)=>{var u,p;const y=`${this.isAdmin&&this.storeId?`https://${this.storeId}`:""}/products/${r(a)}${(null==h?void 0:h.id)?`?variant=${h.id}`:""}`;if(this.showSkeleton)return this.loadSkeleton();const v=o&&o.length&&this.selectedVariants&&this.selectedVariants.length?o.find((t=>this.selectedVariants.find((i=>i.id===t.id)))):void 0,b=(null==v?void 0:v.imageUrl)||t;let g=!0;return g=null==o?void 0:o.some((t=>"Default Title"!==t.title)),n("div",{class:"askTimmy-bundle-card-container"},n("div",{class:"askTimmy-bundle-card"},n("div",{class:"askTimmy-bundle-card-image",onClick:()=>y?window.open(y,"_blank"):void 0},b?n("img",{src:b,class:"askTimmy-bundle-card-image-src"}):n("div",{class:"askTimmy-bundle-card-image-empty"},n(d,null))),n("div",{class:"askTimmy-bundle-card-content"},n("div",{class:"askTimmy-bundle-card-header"},n("div",{class:"askTimmy-bundle-card-title",onClick:()=>y?window.open(y,"_blank"):void 0},null==i?void 0:i.text),n("div",{class:"askTimmy-bundle-card-checkbox",onClick:()=>this.handleOnProductSelect(c,this.cards[c])},n(m,{bgColor:this.selectedProducts.find((t=>t.index===c))?"#000":"#e7e7e7",checkColor:this.selectedProducts.find((t=>t.index===c))?"#fff":"transparent"}))),n("div",{class:"askTimmy-bundle-card-footer",style:{display:"flex",justifyContent:g?"space-between":"flex-end"}},g&&n("div",{class:"askTimmy-bundle-variant-picker-container"},n("select",{onChange:t=>{var i;return this.handleOnVariantChange(c,null===(i=t.target)||void 0===i?void 0:i.value,o)},class:"askTimmy-bundle-variant-picker",style:{appearance:"auto"}},o.map((t=>n("option",{value:t.id,selected:(null==v?void 0:v.id)===t.id},t.title))))),(this.shopCurrencyFormats||this.isSimulator)&&n("div",{class:"askTimmy-bundle-card-price-cont"},(null==v?void 0:v.price)&&(null==v?void 0:v.compareAtPrice)&&n("span",{class:"askTimmy-bundle-card-cmp-price money","default-price":null==v?void 0:v.compareAtPrice},$(null==v?void 0:v.compareAtPrice,this.shopCurrencyFormats,this.presentmentCurrency,this.shopCurrencyCode,this.isSimulator)),n("span",{class:"askTimmy-bundle-card-price money","default-price":null==v?void 0:v.price},$((null==v?void 0:v.price)||s,this.shopCurrencyFormats,this.presentmentCurrency,this.shopCurrencyCode,this.isSimulator)))))),n("div",{class:"askTimmy-bundle-card-description"},this.isDescriptionExpanded[c]?e:`${e.substring(0,70)}`,n("span",{class:"askTimmy-bundle-card-description-show-more-btn",onClick:()=>this.toggleDescription(c)},this.isDescriptionExpanded[c]?` ${null===(u=this.translation)||void 0===u?void 0:u.showLess}`:e.length>70?`... ${null===(p=this.translation)||void 0===p?void 0:p.showMore}`:"")),(!this.isStickAddToCartEnabled||c<this.cards.length-1)&&n("div",{class:"askTimmy-bundle-card-divider",style:{gap:c<this.cards.length-1?"2px":"0px"}},n("span",{class:"askTimmy-bundle-card-divider-line"}),c<this.cards.length-1&&n(l,null),n("span",{class:"askTimmy-bundle-card-divider-line"})))}))),!this.isStickAddToCartEnabled&&n("div",{key:"c16e7ba7bcbbc8eccd3bce6d40c70e598e69ad9c",class:"askTimmy-bundle-footer"},n("div",{key:"224c882c8f5f66715135c7bbd93051745f15f154",class:"askTimmy-bundle-total-container"},this.showSkeleton&&n(s,{key:"12cf6fdb1b5d9e85e0c08c457c0d72e5217dc855",width:"70px",height:"20px",borderRadius:"10px"}),!this.showSkeleton&&n("div",{key:"9f84c48251fe3a9e6cae20e4113328c66a12ee57",class:"askTimmy-bundle-total-label"},null===(u=this.translation)||void 0===u?void 0:u.total," ",n("span",{key:"ed42038aaaf099d3aa772a4955e0c5a1f84bcaf2",class:"askTimmy-bundle-total-count"},"(",this.selectedProducts.length,")")),this.showSkeleton&&n(s,{key:"317cd9a02c6d5bfd78b1ed9589ad78ce231bf518",width:"70px",height:"20px",borderRadius:"10px"}),!this.showSkeleton&&n("span",{key:"dd16a6661c685205cfa9ee6579a2c8bd7a3bbf45",class:"askTimmy-bundle-total-price money","default-price":this.getTotalPrice().toFixed(2)},$(this.getTotalPrice(),this.shopCurrencyFormats,this.presentmentCurrency,this.shopCurrencyCode,this.isSimulator))),this.showSkeleton&&n("div",{key:"914c8b3cfbd71a046e35e6c0a9db26e3a46e43b0",class:"askTimmy-bundle-atc-skeleton"},n(s,{key:"6a7d381b8c8b7dfaf3cb322e410f479d2ee7c24a",width:"100%",height:"40px",borderRadius:"10px"})),!this.showSkeleton&&n("div",{key:"d84c324547c7b502b8bbd79e5fb1fa0f62d8bea8",class:`askTimmy-bundle-add-to-cart-button ${this.selectedProducts.length?"askTimmy-btn-active":"askTimmy-btn-disabled"} ${this.showLoaderOnAddToCart?"askTimmy-btn-loading":""}`,onClick:()=>!this.isAdmin&&this.handleOnAddToCart()},this.showLoaderOnAddToCart?n(a,null):null===(p=this.translation)||void 0===p?void 0:p.addToCart)))}get refElement(){return e(this)}static get watchers(){return{productDetails:["updateCardsWithProductDetails"]}}};B.style=".askTimmy-bundle-layout-container{width:100%;gap:12px}.askTimmy-bundle-header{padding:0px}.askTimmy-bundle-title{font-size:14px;font-weight:bold}.askTimmy-bundle-cards{display:flex;flex-direction:column;gap:20px;padding:0px}.askTimmy-bundle-card-container{display:flex;flex-direction:column;gap:12px}.askTimmy-bundle-card{display:flex;gap:8px}.askTimmy-bundle-card-image{width:80px;height:75px;border-radius:8px}.askTimmy-bundle-card-image:hover{cursor:pointer}.askTimmy-bundle-card-image img{width:100%;border-radius:8px;max-height:75px}.askTimmy-bundle-card-content{width:80%;display:flex;flex-direction:column;justify-content:space-between}.askTimmy-bundle-card-header,.askTimmy-bundle-card-footer{display:flex;justify-content:space-between}.askTimmy-bundle-card-divider{width:100%;display:flex;align-items:center;gap:2px}.askTimmy-bundle-card-divider-line{height:1px;background:#E1E1E1;width:50%}.askTimmy-bundle-card-image-src{height:100%;object-fit:contain;border:0.4px solid rgba(231, 231, 231, 1)}.askTimmy-bundle-variant-picker{height:30px;width:120px;border-radius:6px;border:0.5px solid rgb(217 217 217);padding:5px 4px;font-family:inherit;font-size:12px !important;outline:none;box-shadow:none;background:transparent}select.askTimmy-bundle-variant-picker:focus{outline:none;box-shadow:none}.askTimmy-bundle-card-title{text-overflow:ellipsis;overflow:hidden;max-height:45px;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical}.askTimmy-bundle-card-title:hover{text-decoration:underline;cursor:pointer}.askTimmy-bundle-card-description-show-more-btn{color:rgba(36, 119, 212, 1);cursor:pointer}.askTimmy-bundle-card-price-cont{display:flex;flex-direction:column;align-items:end}.askTimmy-bundle-card-price,.askTimmy-bundle-card-cmp-price{font-weight:650;font-size:13px}.askTimmy-bundle-card-cmp-price{text-decoration:line-through;opacity:0.5;font-size:12px}.askTimmy-bundle-card-checkbox{cursor:pointer}.askTimmy-bundle-total-container{display:flex;justify-content:space-between;font-size:16px;font-weight:bold}.askTimmy-bundle-footer{display:flex !important;flex-direction:column;gap:18px;padding:0}.askTimmy-bundle-add-to-cart-button{height:40px;text-align:center;border-radius:8px;color:white;background-color:var(--user-message-bg-color);display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer}.askTimmy-bundle-add-to-cart-button.askTimmy-btn-disabled{cursor:not-allowed;opacity:0.5}.askTimmy-bundle-add-to-cart-button.askTimmy-btn-loading{cursor:not-allowed}.askTimmy-bundle-total-count{font-weight:500}.askTimmy-bundle-add-to-cart-button svg{width:30px;height:30px}.askTimmy-bundle-skeleton-loading-container{display:flex;gap:10px;width:100%}.askTimmy-bundle-skeleton-loading-content{height:100%;width:75%;display:flex;flex-direction:column;gap:20px}.askTimmy-bundle-title-skeleton-loading{display:flex;flex-direction:column;gap:4px}.askTimmy-bundle-card-image-empty{width:80px;height:75px;display:flex;align-items:center;justify-content:center;background:white;border-radius:8px}.askTimmy-bundle-card-image-empty rect{fill:transparent !important}";const j=class{constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.handleOnClick=void 0,this.type="card",this.cards=void 0,this.translation=void 0,this.locale="default",this.device="desktop",this.shopCurrencyFormats=void 0,this.presentmentCurrency=void 0,this.shopCurrencyCode=void 0,this.productDetails=[],this.isSimulator=!1,this.messageId=void 0,this.storeId=void 0,this.isAdmin=!1,this.showSkeleton=!1}componentWillRender(){this.updateCardsWithProductDetails(this.productDetails)}componentDidLoad(){this.aiChatEvents.emit({type:"cardLayoutRendered",element:this.refElement,cards:this.cards,messageId:this.messageId})}updateCardsWithProductDetails(t){if(t&&t.length){let i=JSON.parse(JSON.stringify(this.cards));for(let n of i){const i=t.find((t=>t.id===n.id));if(i&&(n.imageUrl=i.imageUrl,n.title={text:i.title,type:"text"},null==n?void 0:n.filteredVariant)){let t=i.variants.find((t=>t.title===n.filteredVariant.title||t.id===n.filteredVariant.id));t&&(n.filteredVariant=t)}}JSON.stringify(this.cards)!==JSON.stringify(i)&&this.handleShowSkeleton(!1),this.cards=i}}async getProductsDetails(){return this.handleShowSkeleton(!0),this.cards}async handleShowSkeleton(t){this.showSkeleton=t}async updateProductDetails(t){this.updateCardsWithProductDetails(t)}loadSkeleton(){return n("div",{class:"askTimmy-card-skeleton-loading-container"},n(s,{width:"250px",height:"250px",borderRadius:"10px"}),n("div",{class:"askTimmy-card-skeleton-loading-content"},n("div",{class:"askTimmy-card-title-skeleton-loading"},n(s,{width:"90%",height:"8px",borderRadius:"10px"}),n(s,{width:"70%",height:"8px",borderRadius:"10px"})),n(s,{width:"100%",height:"35px",borderRadius:"8px"})))}render(){var t,i,e;return n("div",{key:"acab38777a5fbed6aa6f43361e61c48a7808910d",class:"card-carousel-container"},"carousel"===this.type&&(null===(t=this.cards)||void 0===t?void 0:t.length)>1&&!this.showSkeleton&&n("div",{key:"52febe183841dd44882aeffd2dd1bf5df6d8532d",class:"askTimmy-carousel-button left hide",onClick:()=>{let t=this.refElement.querySelector(".card-layout-container"),i=-1*(this.refElement.querySelector(".card-container").clientWidth+10);if(t.scrollLeft+i<=0){let t=this.refElement.querySelector(".askTimmy-carousel-button.left");t&&(t.classList.add("hide"),t.classList.remove("show"))}let n=this.refElement.querySelector(".askTimmy-carousel-button.right");n&&n.classList.remove("hide"),t.scrollBy({left:i,behavior:"smooth"})}},n(p,{key:"41a6bf42fad7c263022a00295a0f299caf7787ac"})),n("div",{key:"cdaaa3e31f1bddc705067b45e02c34349e1e3402",class:"card-layout-container",style:{flexDirection:"carousel"===this.type?"row":"column"}},(null===(i=this.cards)||void 0===i?void 0:i.length)&&this.cards.map((({id:t,title:i,description:e,url:o,imageUrl:s,buttons:a,filteredVariant:m,variants:l})=>this.showSkeleton?this.loadSkeleton():n("div",{class:"card-container"},n("div",{class:"card-content"},n("div",{class:"askTimmy-card-image"},s?n("img",{src:s}):n("div",{class:"askTimmy-card-image-empty"},n(d,null)),n("div",{class:"askTimmy-similar-product-icon-container"},n("div",{class:"askTimmy-similar-product-icon",onClick:()=>this.handleOnClick("similar",{imageUrl:s,type:"similar",url:o})},n(c,null)))),n("div",{class:"askTimmy-card-info"},i&&"text"===i.type&&n("div",{class:"askTimmy-card-title"},i.text),(null==m?void 0:m.price)&&(this.shopCurrencyFormats||this.isSimulator)&&n("div",{class:"askTimmy-card-price-cont"},n("span",{class:"askTimmy-card-price money","default-price":m.price},$(m.price,this.shopCurrencyFormats,this.presentmentCurrency,this.shopCurrencyCode,this.isSimulator)),m.compareAtPrice&&n("span",{class:"askTimmy-card-cmp-price money","default-price":m.compareAtPrice},$(m.compareAtPrice,this.shopCurrencyFormats,this.presentmentCurrency,this.shopCurrencyCode,this.isSimulator))),e&&e.length>0&&n("div",{class:"askTimmy-card-description"},e.map((({type:t,text:i,url:e})=>"text"===t?n("div",{class:"askTimmy-card-description-text"},i):"openUrl"===t?n("a",{href:e,target:"_blank",class:"askTimmy-card-description-url"},i):void 0))))),n("div",{class:"askTimmy-card-action-buttons"},a&&a.length>0&&n("div",{class:"askTimmy-card-buttons"},a.map((({type:i,text:e,url:o,productName:s,imageUrl:a})=>{var d,h;if("openUrl"===i){const a=`${this.isAdmin&&this.storeId?`https://${this.storeId}`:""}/products/${r(o)}${(null==m?void 0:m.id)?`?variant=${m.id}`:""}`;return n("div",{class:"askTimmy-card-button openUrl"},n("div",{onClick:()=>{var n;this.handleOnClick("bc",{text:e,url:o,productName:s,type:i,productId:t,id:`discovery#${this.messageId}#${(null==m?void 0:m.id)||(null==m?void 0:m.key)||t}`,variantIds:(null==l?void 0:l.map((t=>t.id)))||[]}),null===(n=window.open(a,"_blank"))||void 0===n||n.focus()}},null===(h=null===(d=this.translation)||void 0===d?void 0:d.assistant)||void 0===h?void 0:h.viewProduct))}if("quickReply"===i)return n("div",{class:"askTimmy-card-button askTimmy-quickReply",onClick:()=>this.handleOnClick("qr",{imageUrl:a,productName:s,url:o,type:"QR"})},n("div",null,n(u,null)))})))))))),"carousel"===this.type&&(null===(e=this.cards)||void 0===e?void 0:e.length)>1&&!this.showSkeleton&&n("div",{key:"a7b92ef589b0a199e67022b6564288e26713d33b",class:"askTimmy-carousel-button right",onClick:()=>{let t=this.refElement.querySelector(".card-layout-container"),i=this.refElement.querySelector(".card-container").clientWidth,n=i*Math.floor(t.scrollWidth/i),e=1*(i+10);if(n-(t.scrollLeft+e)<e&&(e+=n-(t.scrollLeft+e)),t.scrollLeft+e>=n){let t=this.refElement.querySelector(".askTimmy-carousel-button.right");t&&t.classList.add("hide")}let o=this.refElement.querySelector(".askTimmy-carousel-button.left");o&&o.classList.remove("hide"),t.scrollBy({left:e,behavior:"smooth"})}},n(h,{key:"8a8cbf0359a630e8449cb0f725d8c773bd7525ad"})))}get refElement(){return e(this)}static get watchers(){return{productDetails:["updateCardsWithProductDetails"]}}};j.style=".card-carousel-container{position:relative;margin-bottom:10px}.card-layout-container{display:flex;gap:15px;overflow-x:auto;scrollbar-width:none;margin-bottom:2px}.card-container{width:245px;border-radius:8px;display:flex;flex-direction:column;gap:8px;min-width:245px}.askTimmy-card-image{border-radius:8px;max-height:300px;position:relative}.askTimmy-card-image img{width:100%;height:100%;border-radius:8px}.card-content{display:flex;flex-direction:column;gap:5px;padding:10px;height:100%;justify-content:space-between;background:rgba(255, 255, 255, 1);border:0.89px solid rgb(233 233 233);border-radius:8px}.askTimmy-card-title{font-size:14px;font-weight:450;text-overflow:ellipsis;overflow:hidden;max-height:45px;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;color:black;line-height:1.2}.askTimmy-card-description{font-size:12px}.askTimmy-card-description-url{color:rgba(44, 110, 203, 1);text-decoration:none}.askTimmy-card-price-text{font-size:15px;font-weight:700}.askTimmy-card-buttons{display:flex;justify-content:space-between;gap:5px}.askTimmy-card-button{width:100%}.askTimmy-card-button div{height:40px;width:100%;border:none;outline:none;border-radius:8px;background:rgba(255, 255, 255, 1);border:0.89px solid rgba(236, 236, 236, 1);color:var(--assistant-color);font-weight:bold;cursor:pointer;display:flex;justify-content:center;align-items:center;gap:5px}.askTimmy-carousel-button{opacity:1;pointer-events:auto;position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;border-radius:50%;transition:background-color 150ms ease 0s, box-shadow 150ms ease 0s, opacity 150ms ease 0s;height:42px;width:42px;cursor:pointer;background-color:#fff;color:black;box-shadow:0 1px 3px 1px rgba(0, 0, 0, 0.01), 0 0 0 1px rgba(0, 0, 0, 0.03), 0 2px 4px -3px rgba(0, 0, 0, 0.12), 0 5px 8px -8px rgba(0, 0, 0, 0.12);border:none;top:25%}.askTimmy-card-button.askTimmy-quickReply{width:21%}.askTimmy-card-button.askTimmy-quickReply svg{width:15px;height:15px}.askTimmy-card-button.askTimmy-quickReply svg path:first-child{fill:var(--assistant-color)}.askTimmy-carousel-button.right{right:5px;top:120px}.askTimmy-carousel-button.left{left:20px;top:120px}.askTimmy-carousel-button.left svg{margin-right:2px}.askTimmy-carousel-button.left.hide{opacity:0}.askTimmy-carousel-button.right.hide{opacity:0}.askTimmy-carousel-button svg{height:16px;width:16px}.card-content .askTimmy-similar-product-icon-container{position:absolute;left:80%;bottom:10%;display:none}.card-content .askTimmy-similar-product-icon{width:40px;height:40px;border-radius:50%;border:0.57px solid rgba(255, 255, 255, 1);background:#e9e9e9;cursor:pointer;position:relative}.card-content .askTimmy-similar-product-icon:hover{scale:1.1}.askTimmy-card-price-cont{display:flex;gap:4px;align-items:center;padding-top:4px}.askTimmy-card-price{font-size:14px;font-weight:bold}.askTimmy-card-cmp-price{text-decoration:line-through;font-size:12px}.askTimmy-card-skeleton-loading-container,.askTimmy-card-skeleton-loading-content,.askTimmy-card-title-skeleton-loading{display:flex;flex-direction:column;gap:10px}.askTimmy-card-title-skeleton-loading{gap:4px}.askTimmy-card-image-empty{height:250px;display:flex;justify-content:center;align-items:center;background:#80808014;border-radius:8px}@media only screen and (max-width: 600px){.askTimmy-carousel-button{display:none}}";const L=class{constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.handleOnChatView=void 0,this.styling=void 0,this.isAdmin=!1}componentDidLoad(){this.aiChatEvents.emit({type:"chatBubbleRendered",element:this.refElement})}render(){var t,i,e,o,s,a,r,d,m,l,h,c,u,p,v,b,g,x,k;return(null===(i=null===(t=this.styling)||void 0===t?void 0:t.classic)||void 0===i?void 0:i.isEnabled)||this.isAdmin?"custom"===(null===(o=null===(e=this.styling)||void 0===e?void 0:e.classic)||void 0===o?void 0:o.type)&&(null===(a=null===(s=this.styling)||void 0===s?void 0:s.classic)||void 0===a?void 0:a.imageUrl)?n("div",{class:"askTimmy-chat-bubble-container askTimmy-custom-launcher "+((null===(d=null===(r=this.styling)||void 0===r?void 0:r.classic)||void 0===d?void 0:d.hideGreenDot)?"askTimmy-hide-green":""),onClick:()=>this.handleOnChatView("chat"),style:{background:`url(${null===(l=null===(m=this.styling)||void 0===m?void 0:m.classic)||void 0===l?void 0:l.imageUrl})`}},n("span",null)):n("div",{class:"askTimmy-chat-bubble-container "+((null===(c=null===(h=this.styling)||void 0===h?void 0:h.classic)||void 0===c?void 0:c.hideGreenDot)?"askTimmy-hide-green":""),onClick:()=>this.handleOnChatView("chat"),style:{background:`${null===(p=null===(u=this.styling)||void 0===u?void 0:u.classic)||void 0===p?void 0:p.bgColor}`,float:`${(null===(g=null===(b=null===(v=this.styling)||void 0===v?void 0:v.classic)||void 0===b?void 0:b.position)||void 0===g?void 0:g.horizontal)||"right"}`}},n(y,{type:(null===(k=null===(x=this.styling)||void 0===x?void 0:x.classic)||void 0===k?void 0:k.type)||"default-1",color:"white"})):null}get refElement(){return e(this)}};L.style=".askTimmy-chat-bubble-container{height:60px;width:60px;background-color:var(--classic-launcher-bg-color);border-radius:50%;box-shadow:0 1px 6px rgba(0,0,0,0.06), 0 2px 24px rgba(0,0,0,0.08);display:flex;justify-content:center;align-items:center;transition:background-color 150ms ease 0s, box-shadow 150ms ease 0s;cursor:pointer;pointer-events:all;float:right;position:relative}.askTimmy-chat-bubble-container img{width:36px;height:36px}.askTimmy-chat-bubble-container svg{width:30px;height:30px}.askTimmy-chat-bubble-container::before{content:'';width:12px;height:12px;background:rgba(0, 189, 42, 1);border-radius:50%;position:absolute;bottom:3px;right:3px;border:2px solid white}.askTimmy-chat-bubble-container.askTimmy-hide-green::before{display:none}.askTimmy-custom-launcher{background-size:cover !important;background-repeat:no-repeat !important}";const N=class{constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.nudges=void 0,this.styling=void 0,this.translation=void 0,this.placement="bubble",this.isAdmin=!1,this.handleOnNudgeClick=void 0,this.stylingTemp=void 0,this.translationTemp=void 0,this.scrollingInterval=void 0}componentDidLoad(){this.aiChatEvents.emit({type:"chatNudgesRendered",element:this.refElement}),this.addScrollingAnimation()}componentWillLoad(){this.setStyling(),this.setTranslation()}setStyling(){var t;this.stylingTemp=null===(t=this.styling)||void 0===t?void 0:t["bubble"===this.placement?"classic":"footer"]}setTranslation(){var t;this.translationTemp=null===(t=this.translation)||void 0===t?void 0:t.footer}addScrollingAnimation(){var t;(null===(t=this.nudges)||void 0===t?void 0:t.length)>1&&"footer"===this.placement&&setTimeout((()=>{let t=document.querySelector(".askTimmy-nudge-messages");if(t){let i=t.querySelectorAll(".askTimmy-nudge-message"),n=null==i?void 0:i.length;if(n){let i=0;void 0!==this.scrollingInterval&&clearInterval(this.scrollingInterval),this.scrollingInterval=setInterval((()=>{t.scroll({top:i+40,behavior:"smooth"}),i+=40,i>=40*n&&(t.scroll({top:-i,behavior:"instant"}),i=0)}),5e3)}}}),1e3)}getMetrics(){return localStorage.getItem("askTimmy-metrics")?JSON.parse(localStorage.getItem("askTimmy-metrics")):void 0}setMetrics(t){localStorage.setItem("askTimmy-metrics",JSON.stringify(t))}handleOnClose(){var t,i,n,e;null===(t=document.querySelector(".askTimmy-chat-nudges-container"))||void 0===t||t.classList.add("askTimmy-hide"),setTimeout((()=>{var t;null===(t=document.querySelector(".askTimmy-chat-nudges-container"))||void 0===t||t.classList.add("askTimmy-hide-permanent")}),400);let o=this.getMetrics();if(o&&(null===(i=this.nudges)||void 0===i?void 0:i.length)){let t=(null===(e=null===(n=null==o?void 0:o.closed)||void 0===n?void 0:n.nudges)||void 0===e?void 0:e.values)||[];t.push({nudges:this.nudges.map((t=>t.id)),createdAt:(new Date).getTime()}),o.closed.nudges={values:t,updatedAt:(new Date).getTime()},o.updatedAt=(new Date).getTime()}this.setMetrics(o)}render(){var t,i,e,o,s,a,r,d,m,l,h,c,u,p,b,g,x,k,f,T,w;return n("div",{key:"4117a10eebbec648a2fcb4b0769f89146dd8d1ea",class:`askTimmy-chat-nudges-container ${this.placement}-nudge`,onMouseOver:()=>{this.isAdmin||document.querySelector(".askTimmy-chat-nudges-close").classList.add("active")},onMouseOut:()=>{this.isAdmin||document.querySelector(".askTimmy-chat-nudges-close").classList.remove("active")}},(null===(t=this.nudges)||void 0===t?void 0:t.length)>0&&!this.isAdmin&&n("div",{key:"53e64bca1a8865ff48c2c261b2d0f40eac803408",class:"askTimmy-chat-nudges-close",onClick:()=>this.handleOnClose()},n(v,{key:"4fde101fc11372400b0e2ee628da88b2a82979b5"})),n("div",{key:"2b66e6822e3b108f5e440b3455939ec2a23ee42d",class:`askTimmy-chat-nudges ${this.placement}-nudge`},(null===(i=this.nudges)||void 0===i?void 0:i.length)>0&&"bubble"===this.placement&&this.nudges.map(((t,i)=>{var e,o,s,a,r,d,m,l,h,c,u,p,v,b,g,x,k,f;return n("div",{class:`askTimmy-chat-nudge text-nudge  ${this.placement}-nudge`,key:i,onClick:()=>this.handleOnNudgeClick(t),style:{color:`${null===(e=this.stylingTemp)||void 0===e?void 0:e.color}`,background:`${null===(o=this.stylingTemp)||void 0===o?void 0:o.bgColor}`,borderRadius:`${null===(s=this.stylingTemp)||void 0===s?void 0:s.borderRadius}px`}},n("div",{class:`askTimmy-nudge-message ${this.placement}-nudge`},t.message),"footer"===this.placement&&(null===(d=null===(r=null===(a=this.translationTemp)||void 0===a?void 0:a.button)||void 0===r?void 0:r.text)||void 0===d?void 0:d.length)>0&&n("div",{class:"askTimmy-nudge-ai-button",style:{background:`${null===(l=null===(m=this.stylingTemp)||void 0===m?void 0:m.button)||void 0===l?void 0:l.bgColor}`,borderRadius:`${null===(c=null===(h=this.stylingTemp)||void 0===h?void 0:h.button)||void 0===c?void 0:c.borderRadius}px`}},n("div",{class:"askTimmy-nudge-ai-star"},n(y,{type:null===(p=null===(u=this.stylingTemp)||void 0===u?void 0:u.star)||void 0===p?void 0:p.type,color:null===(b=null===(v=this.stylingTemp)||void 0===v?void 0:v.star)||void 0===b?void 0:b.color})),n("div",{class:"askTimmy-nudge-ai-button-text",style:{color:`${null===(x=null===(g=this.stylingTemp)||void 0===g?void 0:g.button)||void 0===x?void 0:x.color}`}},null===(f=null===(k=this.translationTemp)||void 0===k?void 0:k.button)||void 0===f?void 0:f.text)))})),(null===(e=this.nudges)||void 0===e?void 0:e.length)>0&&"footer"===this.placement&&n("div",{key:"79c1f0d929ddc26ba75d013ba0735a6ccea0fb69",class:`askTimmy-chat-nudge text-nudge  ${this.placement}-nudge`,onClick:()=>{this.handleOnClose(),this.handleOnNudgeClick()},style:{color:`${null===(o=this.stylingTemp)||void 0===o?void 0:o.color}`,background:`${null===(s=this.stylingTemp)||void 0===s?void 0:s.bgColor}`,borderRadius:`${null===(a=this.stylingTemp)||void 0===a?void 0:a.borderRadius}px`}},n("div",{key:"b7a12e311fd1fba83ae5e1e04211c468912ab715",class:"askTimmy-nudge-messages"},n("div",{key:"e3a0d6482c66c3f385b2909bd4d6cd24925821dd",class:"askTimmy-nudge-messages-scroll-div"},this.nudges.map(((t,i)=>{var e;return n("div",{class:`askTimmy-nudge-message ${this.placement}-nudge`,key:i,style:{display:(null===(e=t.message)||void 0===e?void 0:e.length)>55?"-webkit-box":"flex"}},t.message)})))),"footer"===this.placement&&(null===(m=null===(d=null===(r=this.translationTemp)||void 0===r?void 0:r.button)||void 0===d?void 0:d.text)||void 0===m?void 0:m.length)>0&&n("div",{key:"b75cbdaf1b818f48c85b94880472f29c8b8ca2f8",class:"askTimmy-nudge-ai-button",style:{background:`${null===(h=null===(l=this.stylingTemp)||void 0===l?void 0:l.button)||void 0===h?void 0:h.bgColor}`,borderRadius:`${null===(u=null===(c=this.stylingTemp)||void 0===c?void 0:c.button)||void 0===u?void 0:u.borderRadius}px`}},n("div",{key:"9298d6692b1fbb217b381e84f98857d14c09352a",class:"askTimmy-nudge-ai-star"},n(y,{key:"ec150467d6cc2b226c93d2a86ea07ea1bd1512fb",type:null===(b=null===(p=this.stylingTemp)||void 0===p?void 0:p.star)||void 0===b?void 0:b.type,color:null===(x=null===(g=this.stylingTemp)||void 0===g?void 0:g.star)||void 0===x?void 0:x.color})),n("div",{key:"313c4a97fe33852136df9c5aade8b0084a60b9a0",class:"askTimmy-nudge-ai-button-text",style:{color:`${null===(f=null===(k=this.stylingTemp)||void 0===k?void 0:k.button)||void 0===f?void 0:f.color}`}},null===(w=null===(T=this.translationTemp)||void 0===T?void 0:T.button)||void 0===w?void 0:w.text)))))}get refElement(){return e(this)}static get watchers(){return{styling:["setStyling"],translation:["setTranslation"],nudges:["addScrollingAnimation"]}}};N.style=".askTimmy-chat-nudges-container{display:flex;flex-direction:column;gap:15px;align-items:end;margin-bottom:15px;max-width:340px}.askTimmy-chat-nudges-container.footer-nudge{position:fixed;left:50%;bottom:10px;transform:translateX(-50%);z-index:9999999999}.askTimmy-chat-nudges-container.askTimmy-hide{animation:300ms ease-out 0ms 1 normal forwards running toHide}.askTimmy-chat-nudges-container.askTimmy-hide-permanent{display:none}.askTimmy-chat-nudge{padding:10px 12px 10px;color:var(--classic-nudge-color);box-shadow:0px 1px 3px 1px rgba(22, 26, 30, 0.01), 0px 4px 8px -6px rgba(22, 26, 30, 0.08), 0px 1px 5px -4px rgba(22, 26, 30, 0.08), 0px 0px 0px 1px rgba(22, 26, 30, 0.04), 0px 1px 0px 0px rgba(22, 26, 30, 0.02);border-radius:10px;background:var(--classic-nudge-bg-color);font-size:14px;font-weight:400;line-height:20px;cursor:pointer;display:flex;justify-content:center;align-items:center}.askTimmy-chat-nudge.footer-nudge{width:400px;height:55px;justify-content:space-between}.askTimmy-nudge-messages-scroll-div{display:flex;flex-direction:column}.askTimmy-nudge-messages{height:40px;overflow:hidden;width:75%;display:flex;flex-direction:column}.askTimmy-nudge-message{text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;height:40px;overflow:hidden;width:75%;display:flex;align-items:center}.askTimmy-nudge-message.bubble-nudge{width:100%;height:auto}.askTimmy-nudge-messages .askTimmy-nudge-message{width:100%}.askTimmy-nudge-ai-button{display:flex;justify-content:center;align-items:center;gap:10px;padding:8px 10px;width:25%}.askTimmy-nudge-ai-star{display:flex}.askTimmy-nudge-ai-star svg{width:20px;height:20px}.askTimmy-chat-nudges-close{width:32px;height:32px;background:#fff;border-radius:50%;box-shadow:var(--shadows-surfaceLight);display:none;justify-content:center;align-items:center;cursor:pointer;opacity:0;animation:500ms ease-out 0ms 1 normal forwards running toShow}.askTimmy-chat-nudges-close.active{display:flex}.askTimmy-chat-nudges{display:flex;flex-direction:column;align-items:end;gap:15px;opacity:0;animation:200ms ease-out 0ms 1 normal forwards running toShow, 500ms ease-out 0ms 1 normal forwards running downToup-nudges}.card-nudge{overflow:hidden;display:flex;flex-direction:column;justify-content:center;padding:0;width:120px}.card-nudge img{height:120px}.card-nudge-content{padding:11px 10px 10px}.card-nudge-title{font-size:15px;font-weight:bold}.card-nudge-description{font-size:13px;opacity:0.8}.multi-nudge{display:flex;flex-direction:column;gap:8px}.nudge-buttons{display:flex;gap:10px;margin-bottom:5px}.nudge-buttons div{height:30px;display:flex;justify-content:center;align-items:center;border:none;border-radius:5px;padding:5px 8px;box-shadow:0 1px 6px rgba(0, 0, 0, 0.06), 0 2px 24px rgba(0, 0, 0, 0.08);background:#d0d0d0}@keyframes toHide{0%{display:flex}100%{display:none}}@keyframes toShow{0%{opacity:0}100%{opacity:1}}@keyframes downToup-nudges{0%{transform:translateY(15px)}100%{transform:translateY(0px)}}@media only screen and (max-width: 600px){.askTimmy-chat-nudges-close{display:flex}.askTimmy-chat-nudges-container{max-width:60vw}.askTimmy-chat-nudge{max-width:350px}.askTimmy-nudge-messages{width:75%}.askTimmy-nudge-ai-button{width:30%}}";const A=class{constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.recognition=void 0,this.handleRecognitionResult=t=>{const i=t.results[t.results.length-1],n=i[0].transcript;i.isFinal?(this.inputValue=n,this.stopRecognition()):this.inputValue=n},this.handleRecognitionEnd=()=>{var t;this.isListening=!1,null===(t=this.inputElement)||void 0===t||t.focus();const i=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new i,this.setupRecognitionConfig(),this.setupRecognitionEventHandlers()},this.handleAudioEnd=()=>{var t;null===(t=this.recognition)||void 0===t||t.abort(),this.isListening=!1},this.handleRecognitionError=t=>{console.error("Speech recognition error:",t.error),this.isListening=!1,this.stopRecognition()},this.stopRecognition=()=>{var t;try{null===(t=this.recognition)||void 0===t||t.stop(),this.isListening=!1}catch(t){console.error("Error stopping recognition:",t)}},this.toggleVoiceInput=()=>{this.waitingForSystemResponse||this.isAdmin||(this.recognition||this.initSpeechRecognition(),this.recognition&&(this.isListening?this.stopRecognition():(this.recognition.start(),this.isListening=!0)))},this.inputValue="",this.translationTemp=void 0,this.stylingTemp=void 0,this.isListening=!1,this.isSpeechRecognitionSupported=!1,this.waitingForSystemResponse=!1,this.hideUploadIcon=!0,this.sendMessage=void 0,this.handleOnUploadClick=void 0,this.placement="onPage",this.styling=void 0,this.translation=void 0,this.isAdmin=!1,this.isVoiceInputEnabled=!1,this.voiceInputLanguage="en-US"}componentDidLoad(){this.aiChatEvents.emit({type:"chatTextboxRendered",element:this.refElement})}componentWillLoad(){this.setStyling(),this.setTranslation(),this.isVoiceInputEnabled&&this.initSpeechRecognition()}setStyling(){var t,i,n;this.stylingTemp=null===(t=this.styling)||void 0===t?void 0:t["onPage"===this.placement?"launcher":"assistant"],this.stylingTemp&&"onPage"===this.placement&&(this.stylingTemp=this.stylingTemp.quickInput,document.documentElement.style.setProperty("--on-page-textbox-color",null===(n=null===(i=this.stylingTemp)||void 0===i?void 0:i.textbox)||void 0===n?void 0:n.color))}setTranslation(){var t;this.translationTemp=null===(t=this.translation)||void 0===t?void 0:t["onPage"===this.placement?"launcher":"assistant"],this.translationTemp&&"onPage"===this.placement&&(this.translationTemp=this.translationTemp.quickInput)}handleSendMessage(){if(this.sendMessage)this.sendMessage(this.inputValue,{type:"user"});else{let t=document.querySelector("chat-window");t&&(t.message=this.inputValue),this.waitingForSystemResponse=!1}this.inputValue=""}initSpeechRecognition(){const t="SpeechRecognition"in window||"webkitSpeechRecognition"in window;if(this.isSpeechRecognitionSupported=t,!t)return void console.error("Speech recognition not supported");const i=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new i,this.setupRecognitionConfig(),this.setupRecognitionEventHandlers()}setupRecognitionConfig(){this.recognition&&(this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.lang=this.voiceInputLanguage)}setupRecognitionEventHandlers(){this.recognition&&(this.recognition.onresult=this.handleRecognitionResult,this.recognition.onend=this.handleRecognitionEnd,this.recognition.onsoundend=this.stopRecognition,this.recognition.onaudioend=this.handleAudioEnd,this.recognition.onerror=this.handleRecognitionError)}render(){var t,i,e,o,s,r,d,m,l,h,c,u,p,v,k,f,T,w,F,_,C,$;return this.isAdmin||(null===(t=this.stylingTemp)||void 0===t?void 0:t.isEnabled)||"onChat"===this.placement?n("div",{class:`askTimmy-input-box-container ${this.placement}`},n("div",{class:"askTimmy-input-box",style:{background:`${null===(e=null===(i=this.stylingTemp)||void 0===i?void 0:i.textbox)||void 0===e?void 0:e.bgColor}`,outline:`1px solid ${(null===(s=null===(o=this.stylingTemp)||void 0===o?void 0:o.textbox)||void 0===s?void 0:s.borderColor)||"#d7d7d7"}`,borderRadius:`${null===(d=null===(r=this.stylingTemp)||void 0===r?void 0:r.textbox)||void 0===d?void 0:d.borderRadius}px`}},n(y,{type:(null===(l=null===(m=this.stylingTemp)||void 0===m?void 0:m.star)||void 0===l?void 0:l.type)||"default-1",color:(null===(c=null===(h=this.stylingTemp)||void 0===h?void 0:h.star)||void 0===c?void 0:c.color)||"black"}),n("textarea",{id:"askTimmy-textarea",placeholder:this.isListening?(null===(p=null===(u=this.translation)||void 0===u?void 0:u.voiceInput)||void 0===p?void 0:p.placeholder)||"Listening... Speak now!":(null===(v=this.translationTemp)||void 0===v?void 0:v.placeholder)||(null===(f=null===(k=this.translationTemp)||void 0===k?void 0:k.textbox)||void 0===f?void 0:f.placeholder),value:this.inputValue,maxlength:"200",class:this.inputValue.length>50?"askTimmy-textarea big-size":"askTimmy-textarea small-size",style:{padding:"12px 16px",color:`${null===(w=null===(T=this.stylingTemp)||void 0===T?void 0:T.textbox)||void 0===w?void 0:w.color}`},onInput:t=>{this.inputValue=t.target.value},onKeyDown:t=>{t.shiftKey||"Enter"!==t.key||(t.preventDefault(),this.inputValue=t.target.value,this.handleSendMessage())},ref:t=>this.inputElement=t}),!this.hideUploadIcon&&n("div",{class:"askTimmy-upload-icon",style:{cursor:this.waitingForSystemResponse?"not-allowed":"pointer"},onClick:()=>!this.waitingForSystemResponse&&this.handleOnUploadClick()},n(g,null)),this.isVoiceInputEnabled&&this.isSpeechRecognitionSupported&&n("div",{class:`askTimmy-microphone-icon ${this.isListening?"active":""} ${this.waitingForSystemResponse?"askTimmy-microphone-disabled":""}`,onClick:this.toggleVoiceInput},n(x,{fill:this.isListening?"black":"rgb(137, 137, 137)"}))),n("div",{class:this.inputValue.length>50?"askTimmy-send-button big-size "+(this.waitingForSystemResponse?"disable":""):"askTimmy-send-button small-size "+(this.waitingForSystemResponse?"disable":""),style:{cursor:"pointer"},id:"askTimmy-send-button",onClick:()=>{this.waitingForSystemResponse||this.handleSendMessage()}},n("div",{class:"askTimmy-message-send-icon",style:{background:`${null===(_=null===(F=this.stylingTemp)||void 0===F?void 0:F.send)||void 0===_?void 0:_.bgColor}`}},this.waitingForSystemResponse?n(a,null):n(b,{color:null===($=null===(C=this.stylingTemp)||void 0===C?void 0:C.send)||void 0===$?void 0:$.color})))):null}get refElement(){return e(this)}static get watchers(){return{styling:["setStyling"],translation:["setTranslation"]}}};A.style='.askTimmy-input-box-container{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:8px}.askTimmy-input-box-container.onChat{padding:0px 15px 15px 15px}.askTimmy-on-page-text-box-block{margin:15px 0px}.askTimmy-input-box{display:flex;box-shadow:rgba(99, 99, 99, 0.2) 0px 2px 5px 0px;transition:border-color 150ms ease 0s, box-shadow 150ms ease 0s;width:90%;align-items:center;background:var(--textbox-bg-color);border-radius:45px;padding:0px 15px}.askTimmy-input-box textarea{padding-right:7px;margin:0;border-width:1px 0px 1px 1px;border-style:solid;border-color:rgba(115, 115, 118, 0.3);border-image:initial;border-top-right-radius:0px;border-bottom-right-radius:0px;outline:none !important;padding-inline-start:10px;box-sizing:border-box;padding:15px 16px 10px;width:calc(100% - 42px);border-radius:8px 0 0 8px;font-size:14px;resize:none;height:38px;border:none !important;font-family:"Manrope", sans-serif;color:var(--textbox-color);box-shadow:none !important}.askTimmy-input-box svg{width:20px;height:20px}#askTimmy-textarea{flex-grow:1;background:transparent;min-height:46px;border-top-left-radius:40px;border-bottom-left-radius:40px;line-height:1.5}.askTimmy-send-button{box-sizing:border-box;border:1px solid rgba(115, 115, 118, 0.3);box-shadow:rgba(99, 99, 99, 0.2) 0px 2px 5px 0px;resize:none;display:inline-flex;justify-content:center;align-items:center;border-radius:45px;cursor:text;border:none}.askTimmy-message-send-icon{width:36px;height:36px;border-radius:50%;display:flex;justify-content:center;align-items:center}#askTimmy-send-button svg{border-radius:50%}.askTimmy-input-box textarea::placeholder{color:var(--textbox-color);opacity:0.5;font-size:14px}.askTimmy-on-page-text-box-block .askTimmy-input-box textarea::placeholder{color:var(--on-page-textbox-color);opacity:0.5;font-size:14px}.askTimmy-send-button.disable{cursor:not-allowed !important}.askTimmy-input-box textarea::-webkit-scrollbar{display:none}.askTimmy-upload-icon{cursor:pointer;display:flex}.askTimmy-microphone-icon{display:flex;align-items:center;justify-content:center;margin-left:8px;margin-bottom:2px;cursor:pointer}.askTimmy-microphone-disabled{opacity:0.5;cursor:not-allowed !important}.askTimmy-microphone-icon.active svg{animation:pulse 1.2s infinite}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}@media only screen and (max-width: 600px){.askTimmy-input-box textarea{font-size:16px}}';const O=class{componentDidLoad(){this.aiChatEvents.emit({type:"chatWidgetRendered",element:this.refElement})}componentWillLoad(){this.updateRootVariableValues()}constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.chatView="popup",this.storeId=void 0,this.styling=void 0,this.translation=void 0,this.repliesLimit=void 0,this.locale="default",this.device="desktop",this.isAdmin=!1,this.messages=void 0,this.hideImageUpload=!0,this.shopCurrencyFormats=void 0,this.shopCurrencyCode=void 0,this.presentmentCurrency=void 0,this.isLocaleChanged=!1,this.isSimulator=!1,this.activeComponent="bubble",this.message=void 0,this.isFeedbackCaptured=void 0,this.conversationStarter=void 0,this.isVoiceInputEnabled=void 0,this.voiceInputLanguage=void 0,this.handleOnChatView=this.handleOnChatView.bind(this),this.handleOnNudgeClick=this.handleOnNudgeClick.bind(this)}updateRootVariableValues(){var t,i,n,e,o,s,a,r,d,m,l,h,c,u,p,y,v,b,g,x,k,f,T,w,F,_,C,$,W,S,D,z,R,M,B,j,L,N,A,O,E,P,K,I,U,G,q,H,Y,J,Z,V,X,Q;if(this.styling){let tt=document.documentElement;tt.style.setProperty("--assistant-color",null===(i=null===(t=this.styling)||void 0===t?void 0:t.assistant)||void 0===i?void 0:i.color),tt.style.setProperty("--assistant-bg-color",null===(e=null===(n=this.styling)||void 0===n?void 0:n.assistant)||void 0===e?void 0:e.bgColor),tt.style.setProperty("--classic-launcher-bg-color",null===(a=null===(s=null===(o=this.styling)||void 0===o?void 0:o.launcher)||void 0===s?void 0:s.classic)||void 0===a?void 0:a.bgColor),tt.style.setProperty("--user-message-color",null===(m=null===(d=null===(r=this.styling)||void 0===r?void 0:r.assistant)||void 0===d?void 0:d.user)||void 0===m?void 0:m.color),tt.style.setProperty("--user-message-bg-color",null===(c=null===(h=null===(l=this.styling)||void 0===l?void 0:l.assistant)||void 0===h?void 0:h.user)||void 0===c?void 0:c.bgColor),tt.style.setProperty("--system-message-color",null===(y=null===(p=null===(u=this.styling)||void 0===u?void 0:u.assistant)||void 0===p?void 0:p.system)||void 0===y?void 0:y.color),tt.style.setProperty("--system-message-bg-color",null===(g=null===(b=null===(v=this.styling)||void 0===v?void 0:v.assistant)||void 0===b?void 0:b.system)||void 0===g?void 0:g.bgColor),tt.style.setProperty("--header-bg-color",null===(f=null===(k=null===(x=this.styling)||void 0===x?void 0:x.assistant)||void 0===k?void 0:k.header)||void 0===f?void 0:f.bgColor),tt.style.setProperty("--header-color",null===(F=null===(w=null===(T=this.styling)||void 0===T?void 0:T.assistant)||void 0===w?void 0:w.header)||void 0===F?void 0:F.color),tt.style.setProperty("--textbox-bg-color",null===($=null===(C=null===(_=this.styling)||void 0===_?void 0:_.assistant)||void 0===C?void 0:C.textbox)||void 0===$?void 0:$.bgColor),tt.style.setProperty("--textbox-color",null===(D=null===(S=null===(W=this.styling)||void 0===W?void 0:W.assistant)||void 0===S?void 0:S.textbox)||void 0===D?void 0:D.color),tt.style.setProperty("--assistant-border-radius",`${null===(R=null===(z=this.styling)||void 0===z?void 0:z.assistant)||void 0===R?void 0:R.borderRadius}px`),tt.style.setProperty("--assistant-position-right",`${null===(L=null===(j=null===(B=null===(M=this.styling)||void 0===M?void 0:M.launcher)||void 0===B?void 0:B.classic)||void 0===j?void 0:j.position)||void 0===L?void 0:L.rightORLeft}px`),tt.style.setProperty("--assistant-position-bottom",`${null===(E=null===(O=null===(A=null===(N=this.styling)||void 0===N?void 0:N.launcher)||void 0===A?void 0:A.classic)||void 0===O?void 0:O.position)||void 0===E?void 0:E.bottom}px`),tt.style.setProperty("--classic-nudge-color",null===(K=null===(P=this.styling.nudge)||void 0===P?void 0:P.classic)||void 0===K?void 0:K.color),tt.style.setProperty("--classic-nudge-bg-color",null===(U=null===(I=this.styling.nudge)||void 0===I?void 0:I.classic)||void 0===U?void 0:U.bgColor),tt.style.setProperty("--cs-color",null===(G=this.styling.conversationStarter)||void 0===G?void 0:G.color),tt.style.setProperty("--cs-bg-color",null===(q=this.styling.conversationStarter)||void 0===q?void 0:q.bgColor),tt.style.setProperty("--cs-border-color",null===(H=this.styling.conversationStarter)||void 0===H?void 0:H.borderColor),tt.style.setProperty("--feedback-icon-size",`${null===(Z=null===(J=null===(Y=this.styling)||void 0===Y?void 0:Y.assistant)||void 0===J?void 0:J.feedbackIcon)||void 0===Z?void 0:Z.size}px`),tt.style.setProperty("--feedback-icon-color",null===(Q=null===(X=null===(V=this.styling)||void 0===V?void 0:V.assistant)||void 0===X?void 0:X.feedbackIcon)||void 0===Q?void 0:Q.color)}}openChat(){this.activeComponent="chat"===this.activeComponent?"bubble":"chat",this.handleAutoFocus(),requestAnimationFrame((()=>{this.scrollToBottom()}))}handleOnChatView(t){this.isAdmin||(this.activeComponent=t,requestAnimationFrame((()=>{this.scrollToBottom()})),this.handleAutoFocus())}scrollToBottom(){setTimeout((()=>{const t=this.refElement.querySelector(".askTimmy-chat-window");null==t||t.scrollBy({top:t.scrollHeight,behavior:"instant"})}),100)}handleOnNudgeClick(t){this.isAdmin||(this.activeComponent="chat"),"ai-nudge"!==t.type&&"send"!==t.behavior||!t.message||(this.message=t.message)}handleAutoFocus(){setTimeout((()=>{const t=document.querySelector(".askTimmy-chat-container .askTimmy-textarea");t&&t.focus()}),100)}render(){var t,i,e,o,s,a,r,d,m,l,h,c,u,p,y,v,b,g,x,k,f,T,w,F,_,C;return n("div",{key:"793a410873569ec89f4d27e0b2cc45c838fe2403",class:`chat-widget ${this.activeComponent} ${"popup"===this.chatView?"askTimmy-popup":this.chatView} ${this.isAdmin?"askTimmy-admin":"askTimmy-web"}`,style:{right:"right"!==(null===(o=null===(e=null===(i=null===(t=this.styling)||void 0===t?void 0:t.launcher)||void 0===i?void 0:i.classic)||void 0===e?void 0:e.position)||void 0===o?void 0:o.horizontal)?"unset":`${null===(d=null===(r=null===(a=null===(s=this.styling)||void 0===s?void 0:s.launcher)||void 0===a?void 0:a.classic)||void 0===r?void 0:r.position)||void 0===d?void 0:d.rightORLeft}px`,left:"left"!==(null===(c=null===(h=null===(l=null===(m=this.styling)||void 0===m?void 0:m.launcher)||void 0===l?void 0:l.classic)||void 0===h?void 0:h.position)||void 0===c?void 0:c.horizontal)?"unset":`${null===(v=null===(y=null===(p=null===(u=this.styling)||void 0===u?void 0:u.launcher)||void 0===p?void 0:p.classic)||void 0===y?void 0:y.position)||void 0===v?void 0:v.rightORLeft}px`,bottom:`${null===(k=null===(x=null===(g=null===(b=this.styling)||void 0===b?void 0:b.launcher)||void 0===g?void 0:g.classic)||void 0===x?void 0:x.position)||void 0===k?void 0:k.bottom}`}},n("div",{key:"49db494548fb61a4a7a97999a698b5c7439b55fb",class:`chat-window-container ${"chat"===this.activeComponent||"slide"===this.chatView?"askTimmy-show":"askTimmy-hide"} ${this.isAdmin?"askTimmy-admin":"askTimmy-web"}`},n("chat-window",{key:"bca39706f623e91485aeef0fcba844d5269088d0",chatView:this.chatView,messages:this.messages,isSimulator:this.isSimulator,hideChat:"bubble"===this.activeComponent,hideImageUpload:this.hideImageUpload,presentmentCurrency:this.presentmentCurrency,shopCurrencyCode:this.shopCurrencyCode,shopCurrencyFormats:this.shopCurrencyFormats,isLocaleChanged:this.isLocaleChanged,styling:this.styling,translation:this.translation,locale:this.locale,isAdmin:this.isAdmin,message:this.message,repliesLimit:this.repliesLimit,storeId:this.storeId,handleOnChatView:this.handleOnChatView,isFeedbackCaptured:this.isFeedbackCaptured,conversationStarter:this.conversationStarter,isVoiceInputEnabled:this.isVoiceInputEnabled,voiceInputLanguage:this.voiceInputLanguage})),(null===(w=null===(T=null===(f=this.styling)||void 0===f?void 0:f.launcher)||void 0===T?void 0:T.classic)||void 0===w?void 0:w.isEnabled)&&"popup"===this.chatView&&n("div",{key:"c1ec77c7db7a5f2d79c2e5d6c0c08539c13f3a99",class:`chat-nudges-bubble-container ${"popup"===this.chatView?"askTimmy-popup":this.chatView} ${"bubble"===this.activeComponent||this.isAdmin?"askTimmy-show":"askTimmy-hide"}`},n("chat-nudges",{key:"f396d3c78f648de5aca05f04c6276520676d1fd9",styling:null===(F=this.styling)||void 0===F?void 0:F.nudge,translation:null===(_=this.translation)||void 0===_?void 0:_.nudge,handleOnNudgeClick:this.handleOnNudgeClick}),n("chat-bubble",{key:"3fc26428a8f871fda3aae3dd66f4b005e3279b5d",styling:null===(C=this.styling)||void 0===C?void 0:C.launcher,handleOnChatView:this.handleOnChatView})))}get refElement(){return e(this)}static get watchers(){return{styling:["updateRootVariableValues"]}}};O.style=':root{--shadows-surfaceLight:0px 1px 3px 1px rgba(22, 26, 30, 0.01), 0px 4px 8px -6px rgba(22, 26, 30, 0.08), 0px 1px 5px -4px rgba(22, 26, 30, 0.08), 0px 0px 0px 1px rgba(22, 26, 30, 0.04), 0px 1px 0px 0px rgba(22, 26, 30, 0.02);--assistant-color:#8E35FF;--assistant-bg-color:#FFF;--classic-launcher-bg-color:#8E35FF;--assistant-border-radius:24px;--assistant-position-bottom:20px;--assistant-position-right:24px;--user-message-color:#FFF;--user-message-bg-color:#8E35FF;--system-message-color:#000;--system-message-bg-color:#F2F2F2;--header-bg-color:#FFF;--header-color:#000;--textbox-bg-color:#F2F4F7;--textbox-color:#000;--on-page-textbox-color:#000;--classic-nudge-color:#000;--classic-nudge-bg-color:#FFF;--cs-color:#000;--cs-bg-color:#E7F5FE;--cs-border-color:#4093DE}.chat-widget{position:fixed;bottom:var(--assistant-position-bottom);right:var(--assistant-position-right);-webkit-font-smoothing:antialiased;z-index:9999999999999999;font-family:"Manrope", sans-serif;font-optical-sizing:auto}.chat-widget.slide{bottom:5px;right:5px}.chat-widget.chat{height:85%;width:440px;}.chat-widget.slide{height:98.7%}.chat-window-container{height:100%}.chat-widget.askTimmy-admin{position:relative;bottom:0 !important;right:0 !important;left:0 !important;height:100%}.chat-window-container.askTimmy-show,.chat-nudges-bubble-container.askTimmy-show{display:flex}.chat-nudges-bubble-container{flex-direction:column}.chat-nudges-bubble-container.askTimmy-hide,.chat-window-container.askTimmy-hide{display:none}chat-window{width:100%}.askTimmy-skeleton-loading{opacity:.7;animation:askTimmy-skeleton-loading 1s linear infinite alternate}@keyframes toShow1{0%{display:none}100%{display:flex}}@keyframes upToDown{0%{transform:translateY(0px)}100%{transform:translateY(200px)}}@media only screen and (max-width: 600px){.chat-widget.chat{right:0px !important;bottom:0px !important;left:0px !important;height:100%;width:100%}body:has(.chat-window-container.askTimmy-show.askTimmy-web){overflow:hidden;position:fixed}}@keyframes downToup2{0%{width:80px;height:17%}25%{width:160px;height:34%}50%{width:240px;height:51%}75%{width:320px;height:68%}100%{width:400px;height:85%}}@keyframes uptodown1{0%{width:400px;opacity:1}25%{width:320px;opacity:1}50%{width:240px;opacity:1}75%{width:160px;opacity:1}100%{width:80px;opacity:0;display:none}}@keyframes reducingHeight{0%{height:85%}25%{height:68%}50%{height:51%}75%{height:34%}100%{height:auto}}@keyframes askTimmy-skeleton-loading{0%{background-color:hsl(0deg 0% 82.05%)}100%{background-color:hsl(200, 20%, 95%)}}';const E=class{constructor(n){t(this,n),this.aiChatEvents=i(this,"aiChatEvents",7),this.conversation=[],this.inputValue="",this.endChatModal={status:"",message:"Are you sure want to end the chat?",hideCancelBtn:!1,hideEndChatBtn:!1,hideCloseBtn:!0},this.productRelatedQuestion=void 0,this.conversationStarters=void 0,this.waitingForSystemResponse=!1,this.avatar=void 0,this.isPhotoUploadBtnClicked=!1,this.isMsgInputBoxShown=!0,this.photoSearchCroppedImg="",this.timeoutInterval=void 0,this.showLoaderOnAddToCart=!1,this.toastMessage={status:"",message:"",type:"success",source:""},this.productDetails=[],this.productIds=[],this.showFeedbackResponseModal=!1,this.feedbackText="",this.selectedResponse=[],this.message=void 0,this.messages=void 0,this.initiator=void 0,this.streamingMessages=void 0,this.chatView=void 0,this.styling=void 0,this.translation=void 0,this.repliesLimit=void 0,this.repliesLimitStatus=void 0,this.locale="default",this.device="desktop",this.isAdmin=!1,this.handleOnChatView=void 0,this.conversationStarter=[],this.hideChat=!0,this.hideImageUpload=!0,this.shopCurrencyFormats=void 0,this.presentmentCurrency=void 0,this.shopCurrencyCode=void 0,this.isLocaleChanged=!1,this.isSimulator=!1,this.storeId=void 0,this.isFeedbackCaptured=void 0,this.isFeedbackSubmitted=!1,this.isVoiceInputEnabled=void 0,this.voiceInputLanguage=void 0,this.handleOnClick=this.handleOnClick.bind(this),this.sendMessage=this.sendMessage.bind(this),this.showToastMessage=this.showToastMessage.bind(this)}componentWillLoad(){this.verifyMessage(),this.processStreamingMessages(),this.checkRepliesLimitStatus(),this.updateConversationStarter()}componentDidLoad(){this.aiChatEvents.emit({type:"chatWindowRendered",element:this.refElement}),this.addScrollListener()}async toggleMessageInputBox(t){this.isMsgInputBoxShown=t}async setPhotoSearchCroppedImage(t){this.photoSearchCroppedImg=t,this.isPhotoUploadBtnClicked=!1}showToastMessage(t){this.toastMessage=t.detail,setTimeout((()=>{this.toastMessage={status:"hide",message:"",type:"success"}}),3e3)}handleAiChatEvents(t){var i;(this.shopCurrencyCode!==(null===(i=this.presentmentCurrency)||void 0===i?void 0:i.active)||this.isLocaleChanged)&&("cardLayoutRendered"===t.detail.type&&this.addGetProductDetailsObserver(t.detail.element),"bundleLayoutRendered"===t.detail.type&&this.addGetProductDetailsObserver(t.detail.element))}addGetProductDetailsObserver(t){if(t){const i=new IntersectionObserver((t=>{t.forEach((t=>{var n;t.isIntersecting&&(null===(n=t.target)||void 0===n||n.getProductsDetails().then((i=>{var n,e,o,s;if(i&&i.length){let s=i.filter((t=>(null==t?void 0:t.id)&&!this.productIds.includes(t.id))).map((t=>t.id));s.length&&"function"==typeof(null===(n=null===window||void 0===window?void 0:window.askTimmy)||void 0===n?void 0:n.getProductDetails)?null===(e=null===window||void 0===window?void 0:window.askTimmy)||void 0===e||e.getProductDetails(s).then((t=>{this.productDetails=[...this.productDetails,...t],this.productIds=[...this.productIds,...s]})):null===(o=t.target)||void 0===o||o.handleShowSkeleton(!1)}else null===(s=t.target)||void 0===s||s.handleShowSkeleton(!1)})),i.unobserve(t.target))}))}),{rootMargin:"-100px"});i.observe(t)}}verifyMessage(){var t,i;this.endChatModal={status:"",message:null===(i=null===(t=this.translation)||void 0===t?void 0:t.assistant)||void 0===i?void 0:i.endChatMessage,hideCancelBtn:!1,hideEndChatBtn:!1,hideCloseBtn:!0},this.waitingForSystemResponse=!1,JSON.stringify(this.messages)!==JSON.stringify(this.conversation)&&(this.conversation=this.messages?this.messages:[]),this.validateSession(),this.productRelatedQuestion||requestAnimationFrame((()=>{this.scrollToBottom()}))}processStreamingMessages(){var t,i;if(this.streamingMessages&&(null===(t=this.conversation)||void 0===t?void 0:t.length)){let t=this.conversation.find((t=>{var i;return(null==t?void 0:t.id)===(null===(i=this.streamingMessages)||void 0===i?void 0:i.id)}));t?t.messages=null===(i=this.streamingMessages)||void 0===i?void 0:i.messages:this.conversation.push(this.streamingMessages)}this.productRelatedQuestion||requestAnimationFrame((()=>{this.scrollToBottom()}))}checkRepliesLimitStatus(){var t,i,n,e,o,s;this.repliesLimitStatus&&(this.endChatModal=this.repliesLimitStatus.isAccountReachedMonthlyLimit?{status:"show",message:null===(t=this.repliesLimit)||void 0===t?void 0:t.monthlyMaxRepliesLimitByAccountText,hideCancelBtn:!0,hideEndChatBtn:!0,hideCloseBtn:!0}:this.repliesLimitStatus.isAccountReachedFreeCreditLimit?{status:"show",message:null===(i=this.repliesLimit)||void 0===i?void 0:i.monthlyMaxRepliesLimitByAccountText,hideCancelBtn:!0,hideEndChatBtn:!0,hideCloseBtn:!0}:this.repliesLimitStatus.isAccountReachedDailyLimit?{status:"show",message:null===(n=this.repliesLimit)||void 0===n?void 0:n.dailyMaxRepliesLimitByAccountText,hideCancelBtn:!0,hideEndChatBtn:!0,hideCloseBtn:!0}:this.repliesLimitStatus.isUserReachedDailyLimit?{status:"show",message:null===(e=this.repliesLimit)||void 0===e?void 0:e.dailyMaxRepliesLimitByUserText,hideCancelBtn:!0,hideEndChatBtn:!0,hideCloseBtn:!0}:{status:"",message:null===(s=null===(o=this.translation)||void 0===o?void 0:o.assistant)||void 0===s?void 0:s.endChatMessage,hideCancelBtn:!1,hideEndChatBtn:!1,hideCloseBtn:!0})}async sendMessage(t,i){var n,e,o;if(this.handleOnChatView("chat"),t&&(this.inputValue=t),i&&(this.initiator=i),this.validateSession()&&""!==this.inputValue.trim()&&"show"!==this.endChatModal.status){if(this.repliesLimit&&this.messages&&this.messages.length&&this.messages.length>=this.repliesLimit.maxRepliesLimitPerChat)return void(this.endChatModal={status:"show",message:this.repliesLimit.maxRepliesLimitPerChatText,hideCancelBtn:!1,hideEndChatBtn:!1,hideCloseBtn:!0});if(this.waitingForSystemResponse)return void(this.endChatModal={status:"show",message:null===(e=null===(n=this.translation)||void 0===n?void 0:n.assistant)||void 0===e?void 0:e.waitingMessage,hideCancelBtn:!0,hideEndChatBtn:!0,hideCloseBtn:!1});let t;this.photoSearchCroppedImg&&(t=this.photoSearchCroppedImg,this.photoSearchCroppedImg="");let i={messages:[{id:this.generateUUID(),type:"text",message:this.inputValue}],type:"user",id:this.generateUUID(),createdAt:(new Date).getTime(),title:(null===document||void 0===document?void 0:document.title)?-1===document.title.lastIndexOf("–")?document.title:document.title.slice(0,document.title.lastIndexOf("–")).trim():void 0,productUrl:this.productRelatedQuestion?this.productRelatedQuestion.url:void 0,currentPageUrl:window.location.href.split("?")[0],messageType:(null===(o=this.productRelatedQuestion)||void 0===o?void 0:o.type)?this.productRelatedQuestion.type:t?"photo-search":"text",imageUrl:this.productRelatedQuestion?this.productRelatedQuestion.imageUrl:void 0,photoSearchImage:t,initiator:this.initiator};this.conversation.push(i),this.isAdmin&&this.conversation.push({messages:[{id:this.generateUUID(),type:"text",message:"Hello! How can I assist you today?"}],type:"system",id:this.generateUUID(),createdAt:(new Date).getTime()}),this.aiChatEvents.emit({type:"message",payload:i}),requestAnimationFrame((()=>{this.scrollToBottom()}))}this.inputValue="",this.message=void 0,this.productRelatedQuestion=void 0,this.conversationStarters=[],this.initiator=void 0,this.closeNudges()}handleRetryMessage(t){let i=JSON.parse(JSON.stringify(this.conversation)),n=i.find((i=>i.id===t));n.status="in-progess",this.conversation=i,this.aiChatEvents.emit({type:"message",payload:n})}updateConversationStarter(){this.conversationStarters=this.conversationStarter}closeNudges(){var t;const i=new CustomEvent("closeNudges");null===(t=document.querySelector("chat-nudges"))||void 0===t||t.dispatchEvent(i)}addScrollListener(){let t=this.refElement.querySelector(".askTimmy-chat-window"),i=this.refElement.querySelector(".askTimmy-scroll-to-bottom");t&&t.addEventListener("scroll",(()=>{t.scrollHeight-t.clientHeight-t.scrollTop>100?i.classList.remove("hide"):i.classList.contains("hide")||i.classList.add("hide")}))}getSession(){if(localStorage.getItem("askTimmy-session"))return JSON.parse(localStorage.getItem("askTimmy-session"))}validateSession(){return!0}generateUUID(){return"xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)}))}handleFeedbackSubmit(t,i){var n,e;this.aiChatEvents.emit({type:"feedback",payload:{type:"not-helpful",reason:t.length>0?t:void 0,additionalComments:i}}),this.showFeedbackResponseModal=!1,this.selectedResponse=[],this.feedbackText="",this.toastMessage={status:"show",message:null===(e=null===(n=this.translation)||void 0===n?void 0:n.feedback)||void 0===e?void 0:e.thankYouMessage,type:"success",source:"feedback"},setTimeout((()=>{this.toastMessage={status:"hide",message:"",type:"success",source:""}}),2e3)}handleFeedbackClick(t){var i,n;this.isFeedbackSubmitted=!0,t?(this.aiChatEvents.emit({type:"feedback",payload:{type:"helpful"}}),this.toastMessage={status:"show",message:null===(n=null===(i=this.translation)||void 0===i?void 0:i.feedback)||void 0===n?void 0:n.thankYouMessage,type:"success",source:"feedback"},setTimeout((()=>{this.toastMessage={status:"hide",message:"",type:"success",source:""}}),2e3)):this.showFeedbackResponseModal=!0}renderFeedback(){var t,i,e,s,a,r,d,m,l,h,c,u,p,y,v,b,g,x,T;const[w,F]=(_=null===(e=null===(i=null===(t=this.styling)||void 0===t?void 0:t.assistant)||void 0===i?void 0:i.feedbackIcon)||void 0===e?void 0:e.size)<=25?[7,72]:_<=30?[8,76]:_<=35?[8,82]:_<=40?[9,86]:[10,88];var _;return n("div",{class:"askTimmy-feedback-container",style:{bottom:this.conversation&&this.conversation.length>0&&this.conversationStarters.length>0?"120px":`${F}px`}},n("div",{class:"askTimmy-feedback-component.show"},n("div",{class:"askTimmy-chat-feedback-actions"},n(o,null,n("div",{class:"askTimmy-feedback-thumbs-container"},n("div",{class:"askTimmy-feedback-thumbs",onClick:()=>!this.isAdmin&&this.handleFeedbackClick(!0),style:{fontSize:`${w}px`}},n(k,{color:null===(r=null===(a=null===(s=this.styling)||void 0===s?void 0:s.assistant)||void 0===a?void 0:a.feedbackIcon)||void 0===r?void 0:r.color,size:null===(l=null===(m=null===(d=this.styling)||void 0===d?void 0:d.assistant)||void 0===m?void 0:m.feedbackIcon)||void 0===l?void 0:l.size}),null===(c=null===(h=this.translation)||void 0===h?void 0:h.feedback)||void 0===c?void 0:c.thumbsUpTooltip)),n("div",{class:"askTimmy-feedback-thumbs-container"},n("div",{class:"askTimmy-feedback-thumbs",onClick:()=>!this.isAdmin&&this.handleFeedbackClick(!1),style:{fontSize:`${w}px`}},n(f,{color:null===(y=null===(p=null===(u=this.styling)||void 0===u?void 0:u.assistant)||void 0===p?void 0:p.feedbackIcon)||void 0===y?void 0:y.color,size:null===(g=null===(b=null===(v=this.styling)||void 0===v?void 0:v.assistant)||void 0===b?void 0:b.feedbackIcon)||void 0===g?void 0:g.size}),null===(T=null===(x=this.translation)||void 0===x?void 0:x.feedback)||void 0===T?void 0:T.thumbsDownTooltip))))))}handleResponseSelection(t){const i=this.selectedResponse.indexOf(t);this.selectedResponse=-1===i?[...this.selectedResponse,t]:[...this.selectedResponse.filter((i=>i!==t))]}renderResponseModal(){var t,i,e,o,s,a,r,d,l,h,c;const u=null===(i=null===(t=this.translation)||void 0===t?void 0:t.feedback)||void 0===i?void 0:i.predefinedResponses;return n("div",{class:"askTimmy-response-modal "+(this.showFeedbackResponseModal?"show":"")},n("div",{class:"askTimmy-response-modal-container"},n("div",{class:"askTimmy-response-modal-header"},n("div",{class:"askTimmy-response-modal-title"},null===(o=null===(e=this.translation)||void 0===e?void 0:e.feedback)||void 0===o?void 0:o.responseTitle),n("div",{class:"askTimmy-response-modal-close",onClick:()=>{this.showFeedbackResponseModal=!1,this.isFeedbackSubmitted=!1}},n(v,null))),n("div",{class:"askTimmy-response-option-container"},u.map((t=>n("div",{class:"askTimmy-response-option "+(this.selectedResponse.includes(t)?"selected":""),onClick:()=>this.handleResponseSelection(t)},n("div",{class:"askTimmy-response-option-checkbox "+(this.selectedResponse.includes(t)?"selected":"not-selected")},this.selectedResponse.includes(t)&&n(m,{bgColor:"#000",checkColor:"#fff"})),n("span",{class:"askTimmy-response-option-text"},t))))),n("div",{class:"askTimmy-feedback-textarea-container"},n("textarea",{class:"askTimmy-feedback-textarea",placeholder:null===(a=null===(s=this.translation)||void 0===s?void 0:s.feedback)||void 0===a?void 0:a.feedbackPlaceholder,value:this.feedbackText,onInput:t=>this.feedbackText=t.target.value})),n("div",{class:"askTimmy-feedback-submit-button",style:{background:null===(l=null===(d=null===(r=this.styling)||void 0===r?void 0:r.assistant)||void 0===d?void 0:d.send)||void 0===l?void 0:l.bgColor},onClick:()=>this.handleFeedbackSubmit(this.selectedResponse,this.feedbackText)},null===(c=null===(h=this.translation)||void 0===h?void 0:h.feedback)||void 0===c?void 0:c.submitFeedback)))}getFormattedDateAndTime(t,i){let n=new Date(t);return"date"===i?`${n.getDate()} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]} ${n.getFullYear()}`:`${n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`}renderConversation(){if(this.conversation&&this.conversation.length){let t,i,e=JSON.parse(JSON.stringify(this.conversation)),s=0,a=0,r=(null===document||void 0===document?void 0:document.title)?-1===document.title.lastIndexOf("–")?document.title:document.title.slice(0,document.title.lastIndexOf("–")).trim():void 0,d=e.map((t=>t.type)),m=d.lastIndexOf("user"),l=d.lastIndexOf("system");if(e.forEach((n=>{"user"===n.type&&(s+=1,t=n.createdAt,i=n.status?n.status:"success"),"system"!==n.type&&"failed"!==n.status||(a+=1)})),s>a){let n;this.waitingForSystemResponse=!0,t&&i&&"success"===i&&(n=((new Date).getTime()-t)/6e4),n&&n>.7?(e.find((i=>i.createdAt===t)).status="failed",this.waitingForSystemResponse=!1,this.timeoutInterval&&clearInterval(this.timeoutInterval)):(this.timeoutInterval||(this.timeoutInterval=setInterval((()=>this.renderConversation()),5e3)),e.push({type:"system",createdAt:(new Date).getTime(),messages:[{type:"loading"}]}))}else this.timeoutInterval&&clearInterval(this.timeoutInterval);m>-1&&l>-1&&e[m].title!==r?e[l].messages.push({type:"context",message:r}):m>-1&&l>-1&&(this.conversationStarters=[]);let h=e.filter((t=>"user"===t.type&&t.title));if(h.length>0){let t=h[0].title;for(let i=1;i<h.length;i++)t&&h[i].id&&h[i].title&&h[i].title!==t&&(t=h[i].title,e.find((t=>t.id===h[i].id)).messages.unshift({type:"context",message:h[i].title}))}return e.map(((t,i)=>{let s=!1;if((i>0&&this.getFormattedDateAndTime(t.createdAt,"date")!==this.getFormattedDateAndTime(e[i-1].createdAt,"date")||0===i)&&(s=!0),s&&t.messages&&t.messages.length&&!t.messages.find((t=>"date"===t.type))&&t.messages.unshift({type:"date",createdAt:t.createdAt}),"user"===t.type&&t.messages&&t.messages.length){let e=!!t.messages.find((t=>"context"===t.type));return n("div",{class:"askTimmy-user-messages"},t.messages.map((({message:o,type:a,imageUrl:r,createdAt:d},m)=>{var l,h,u;return"date"===a?n("div",{class:"askTimmy-chat-message-date"},this.getFormattedDateAndTime(d,"date")):"context"===a?n("div",{class:"askTimmy-current-page-info"},n("span",{class:"front-line line"}),n("span",{class:"info"},null===(u=null===(h=null===(l=this.translation)||void 0===l?void 0:l.assistant)||void 0===h?void 0:h.currentPageContextMessage)||void 0===u?void 0:u.replaceAll("{{pageName}}",o)),n("span",{class:"end-line line"})):"similar"===t.messageType?n("div",{class:"askTimmy-user-message-container"},n("div",{class:"askTimmy-user-message-content"},n("div",{class:"askTimmy-chat-message-time"},this.getFormattedDateAndTime(t.createdAt,"time")),n("div",{class:`askTimmy-message ${t.type} askTimmy-similar-product-container ${0===m||(s||e)&&1===m?"askTimmy-border-radius-2":""}`,key:i},n("div",{class:"askTimmy-similar-product-icon"},n(c,null)),n("div",{class:"askTimmy-similar-product-content"},n("span",{class:"askTimmy-similar-product-message"},o),n("span",{class:"askTimmy-similar-product-image",style:{background:`url(${r})`}})))),"failed"===t.status&&n("div",{class:"askTimmy-user-error-message"},n(T,null)," Message not sent. Tap to retry.")):"QR"===t.messageType?n("div",{class:"askTimmy-user-message-container"},n("div",{class:"askTimmy-user-message-content"},n("div",{class:"askTimmy-chat-message-time"},this.getFormattedDateAndTime(t.createdAt,"time")),n("div",{class:`askTimmy-message ${t.type} askTimmy-qa-product-container ${0===m||(s||e)&&1===m?"askTimmy-border-radius-2":""}`,key:i},n("div",{class:"askTimmy-product-image",style:{background:`url(${t.imageUrl})`}},n("span",null)),n("div",{class:"askTimmy-qa-product-message"},o))),"failed"===t.status&&n("div",{class:"askTimmy-user-error-message",onClick:()=>this.handleRetryMessage(t.id)},n(T,null)," Message not sent. Tap to retry.")):"photo-search"===t.messageType?n("div",{class:"askTimmy-user-message-container"},n("img",{class:"askTimmy-photo-search-img",src:t.photoSearchImage}),n("div",{class:"askTimmy-user-message-content"},n("div",{class:"askTimmy-chat-message-time"},this.getFormattedDateAndTime(t.createdAt,"time")),n("div",{class:`askTimmy-message ${t.type} ${0===m||(s||e)&&1===m?"askTimmy-border-radius-2":""}`,key:i},o)),"failed"===t.status&&n("div",{class:"askTimmy-user-error-message",onClick:()=>this.handleRetryMessage(t.id)},n(T,null)," Message not sent. Tap to retry.")):"text"===a?n("div",{class:"askTimmy-user-message-container"},n("div",{class:"askTimmy-user-message-content"},n("div",{class:"askTimmy-chat-message-time"},this.getFormattedDateAndTime(t.createdAt,"time")),n("div",{class:`askTimmy-message ${t.type} ${0===m||(s||e)&&1===m?"askTimmy-border-radius-2":""}`,key:i},o)),"failed"===t.status&&n("div",{class:"askTimmy-user-error-message",onClick:()=>this.handleRetryMessage(t.id)},n(T,null)," Message not sent. Tap to retry.")):void 0})))}if("system"===t.type&&t.messages&&t.messages.length)return n("div",{class:"askTimmy-system-messages"},t.messages.map((({id:a,message:r,type:d,cards:m,buttons:l,createdAt:h,choices:c},u)=>{var p,y,v,b;if("text"===d){const a=(null==c?void 0:c.length)>0&&(!e.slice(i+1).some((t=>"user"===t.type||"system"===t.type))||this.isAdmin);return n(o,null,n("div",{class:"askTimmy-system-message-container"},n("div",{class:`askTimmy-message ${t.type} ${0===u||s&&1===u?"askTimmy-border-radius-2":""}`,key:i,innerHTML:(r||"").replace(/【.*?】/g,""),style:{marginBottom:a?"0px":"8px"}}),n("div",{class:"askTimmy-chat-message-time"},this.getFormattedDateAndTime(t.createdAt,"time"))),a&&n("div",{class:"askTimmy-choices-btn-container",style:{pointerEvents:this.waitingForSystemResponse?"none":"auto",opacity:this.waitingForSystemResponse?"0.4":"1"}},c.map((t=>n("div",{class:"askTimmy-choice-button",onClick:()=>!this.isAdmin&&this.handleOnClick("ai-suggested-choices",{message:t})},t)))))}return"card"===d?n("card-layout",{cards:m,type:"carousel",messageId:a,isSimulator:this.isSimulator,productDetails:this.productDetails,presentmentCurrency:this.presentmentCurrency,shopCurrencyCode:this.shopCurrencyCode,shopCurrencyFormats:this.shopCurrencyFormats,translation:this.translation,locale:this.locale,device:this.device,handleOnClick:this.handleOnClick,storeId:this.storeId,isAdmin:this.isAdmin}):"button"===d?n("quick-reply-buttons",{buttons:l}):"bundle"===d?n("bundle-layout",{cards:m,productDetails:this.productDetails,isSimulator:this.isSimulator,presentmentCurrency:this.presentmentCurrency,shopCurrencyCode:this.shopCurrencyCode,shopCurrencyFormats:this.shopCurrencyFormats,translation:null===(p=this.translation)||void 0===p?void 0:p.bundleProducts,locale:this.locale,device:this.device,storeId:this.storeId,isAdmin:this.isAdmin}):"date"===d?n("div",{class:"askTimmy-chat-message-date"},this.getFormattedDateAndTime(h,"date")):"loading"===d?n("div",{class:`askTimmy-message askTimmy-message-loading ${t.type} border-radius-2`},n("div",{class:"askTimmy-message-loading-bar first"},n("span",null)),n("div",{class:"askTimmy-message-loading-bar second"},n("span",null))):"context"===d?n("div",{class:"askTimmy-current-page-info"},n("span",{class:"front-line line"}),n("span",{class:"info"},null===(b=null===(v=null===(y=this.translation)||void 0===y?void 0:y.assistant)||void 0===v?void 0:v.currentPageContextMessage)||void 0===b?void 0:b.replaceAll("{{pageName}}",r)),n("span",{class:"end-line line"})):void 0})))}))}return n("div",null)}scrollToBottom(){const t=this.refElement.querySelector(".askTimmy-chat-window");t.scrollBy({top:t.scrollHeight,behavior:"instant"})}closeChat(){this.aiChatEvents.emit({type:"closeChat"}),this.handleOnChatView("bubble"),this.waitingForSystemResponse=!1,this.isFeedbackSubmitted=!1}handleOnClick(t,i){"qr"===t?(this.productRelatedQuestion=i,setTimeout((()=>{const t=this.refElement.querySelector(".askTimmy-textarea");t&&t.focus()}),100)):"bc"===t?this.aiChatEvents.emit({type:"click",payload:i}):"cs"===t?(this.inputValue=i.message,this.sendMessage(void 0,{type:"cs",id:null==i?void 0:i.id,nudgeId:null==i?void 0:i.nudgeId}),this.conversationStarters=[]):"similar"===t?(this.productRelatedQuestion=i,this.inputValue="Showing Similar Products relate to",this.sendMessage()):"ai-suggested-choices"===t&&(this.inputValue=i.message,this.sendMessage(void 0,{type:"ai-suggested-choices"}))}async handleBackIconClick(){const t=document.querySelector("photo-search"),i=()=>{this.isMsgInputBoxShown=!0,this.isPhotoUploadBtnClicked=!1};t||i(),await t.getImageSrc()?t.replaceImage():i()}render(){var t,i,e,s,a,r,d,m,l,h,c,u,p,b,g,x,k,f,C,$,W,S,D,z,R,M,B,j,L,N,A,O,E,P,K,I,U,G,q,H,Y;return(null===(i=null===(t=this.styling)||void 0===t?void 0:t.assistant)||void 0===i?void 0:i.avatar)&&(this.avatar="custom"===(null===(a=null===(s=null===(e=this.styling)||void 0===e?void 0:e.assistant)||void 0===s?void 0:s.avatar)||void 0===a?void 0:a.type)&&(null===(m=null===(d=null===(r=this.styling)||void 0===r?void 0:r.assistant)||void 0===d?void 0:d.avatar)||void 0===m?void 0:m.customUrl)?this.styling.assistant.avatar.customUrl:null===(c=null===(h=null===(l=this.styling)||void 0===l?void 0:l.assistant)||void 0===h?void 0:h.avatar)||void 0===c?void 0:c.default[Number(null===(b=null===(p=null===(u=this.styling)||void 0===u?void 0:u.assistant)||void 0===p?void 0:p.avatar)||void 0===b?void 0:b.type.split("-")[1])-1]),n("div",{key:"3490f7b10b9bd80ba133d5911e0f8582aa75970a",class:`askTimmy-chat-container ${"popup"===this.chatView?"askTimmy-popup":this.chatView} ${this.hideChat&&"slide"!=this.chatView?"askTimmy-hide":"askTimmy-show"} ${this.isAdmin?"askTimmy-admin":"askTimmy-web"}`},n("header",{key:"7126ec417c77da18f1d9a675bb28b7f21b387885",class:"askTimmy-chat-window-header"},n("div",{key:"0d93a599badb8c8461d67d2ee86fdd8b7f98c6b0",class:"askTimmy-header-container"},n("div",{key:"43b61499a8efb69ee4e7d227fb882200ac526a6d",class:"askTimmy-header-content"},n("div",{key:"824708752793ee4caa8b4b13cabdd830ab526a14",class:"askTimmy-chat-icon-container "+(this.isPhotoUploadBtnClicked?"askTimmy-hide-green":"")},!this.isPhotoUploadBtnClicked&&n("div",{key:"fad54cb708b2763d1eaa537dbf0e662f5c8acf80",class:"askTimmy-chat-icon",style:{background:`url(${this.avatar})`}},n("span",{key:"af0bf973bebf3fef0e91696c14db44323b07c6e0"}))),n("div",{key:"77e83cbf0b2605f8df83c3de90614f8590fd509e",class:"askTimmy-heading-content"},n("div",{key:"4faa7bee0bd331183e5a7a67b87bb3c5f713da5c",class:"askTimmy-heading"},this.isPhotoUploadBtnClicked?n("div",{class:"askTimmy-photo-search-title"},n("div",{class:"askTimmy-photo-search-back-icon",onClick:()=>this.handleBackIconClick()},n(_,null)),n("div",null,null===(x=null===(g=this.translation)||void 0===g?void 0:g.photoSearch)||void 0===x?void 0:x.title)):null===(f=null===(k=this.translation)||void 0===k?void 0:k.assistant)||void 0===f?void 0:f.title),!this.isPhotoUploadBtnClicked&&n("div",{key:"2f6b3bcb21ecc511dcf7f98fe225817dc6e95781",class:"askTimmy-sub-heading"},null===($=null===(C=this.translation)||void 0===C?void 0:C.assistant)||void 0===$?void 0:$.subTitle))),n("div",{key:"5608768037513f6b115bd4f621fb83c760721180",class:"askTimmy-action-buttons"},"show"!==this.endChatModal.status&&!this.isPhotoUploadBtnClicked&&n("div",{key:"5c5ade61d02fb9cb96ffd3d3a3f1aef5e61f708b",class:"askTimmy-close-button",onClick:()=>{var t,i;this.endChatModal={message:null===(i=null===(t=this.translation)||void 0===t?void 0:t.assistant)||void 0===i?void 0:i.endChatMessage,hideCancelBtn:!1,hideEndChatBtn:!1,hideCloseBtn:!0,status:"show"}}},n(v,{key:"a053452825757930b6fe4a296027382ff17c14e7"})),n("div",{key:"36ee587f07dd1506542e8839fff8099474feb073",class:"askTimmy-minimize-button",onClick:()=>{this.aiChatEvents.emit({type:"minimizeChat"}),this.handleOnChatView("bubble"),this.isPhotoUploadBtnClicked=!1,this.isMsgInputBoxShown=!0}},n(w,{key:"7a65de8e305df2b4af42b3ced09d48bbe0cb8f0a"}))))),n("div",{key:"30797815bd2f01888f7de55bf6f03b67da12ce1b",class:`askTimmy-toast-message-container  askTimmy-${this.toastMessage.status}`},n("div",{key:"1b13b9625818603c5581d28ee21a5393a7a7ad52",class:`askTimmy-toast-message-container-inner askTimmy-${this.toastMessage.type} ${"feedback"===this.toastMessage.source?"askTimmy-feedback-toast":" "}`},n("div",{key:"6653a191a912d209ac121b16aac6231f3b643be8",class:"askTimmy-toast-message-content"},n("div",{key:"410427e8cc18e5fdf2f82219355186010146929e",class:"askTimmy-toast-message-icon"},n("success"===this.toastMessage.type?F:T,null)),n("div",{key:"6baa99bdb98f474ff96fa8e8886e4c2e974e3889",class:"askTimmy-toast-message-text"},this.toastMessage.message)),n("div",{key:"0231ddce364e72dc695f930de1d95a95c420128b",class:"askTimmy-toast-message-close-button",style:{cursor:"pointer"},onClick:()=>{this.toastMessage={message:"",type:"success",status:"hide"}}}))),n("div",{key:"056f5f57c5131f2909b40981a579fcea21208fcf",class:"askTimmy-chat-window "+("show"===this.endChatModal.status?"askTimmy-hide":"askTimmy-show")},this.isPhotoUploadBtnClicked&&n("div",{key:"7d3869fcca91f994025ac92fbda9ef48d6b88f9d",style:{width:"100%",height:"100%"}},n("photo-search",{key:"21c465aa6419fdcd49a32f8fea15bbfc8beb7632",styling:this.styling,translation:this.translation,isAdmin:this.isAdmin})),!this.isPhotoUploadBtnClicked&&n(o,{key:"ff990fc8e396f65b50d7c6fe68251f8fbc21b821"},n("div",{key:"ee2b067e7c87c21c3aa4a1293b43600509dfe74a",class:"askTimmy-chat-assistant-info"},n("div",{key:"de730badeceaa01be5d036963ce25deee3738c1c",class:"askTimmy-chat-assistant-icon"},n(y,{key:"1e6e63117bc4004eaf368302e90852de8cf636a5",type:null===(D=null===(S=null===(W=this.styling)||void 0===W?void 0:W.assistant)||void 0===S?void 0:S.star)||void 0===D?void 0:D.type,color:null===(M=null===(R=null===(z=this.styling)||void 0===z?void 0:z.assistant)||void 0===R?void 0:R.star)||void 0===M?void 0:M.color})),n("div",{key:"b002d73989a9100d03fa6878ea33c9005fe4263d",class:"chat-assistant-title"},null===(j=null===(B=this.translation)||void 0===B?void 0:B.assistant)||void 0===j?void 0:j.welcomeMessage),n("div",{key:"809f69cee0cb90dadae724b675774bd12a67b7d8",class:"askTimmy-chat-assistant-description"},null===(N=null===(L=this.translation)||void 0===L?void 0:L.assistant)||void 0===N?void 0:N.description)),n("div",{key:"f8b2d55d4aa08c4f671fb69abb1b932fc3cc8556",class:"askTimmy-messages"},this.renderConversation()),this.conversation&&0===this.conversation.length&&n("conversation-stater",{key:"fc2980fbbe3d70f5c04f5f03a45c1efa8aa15033",type:"chat",conversationStarters:this.conversationStarters,handleOnClick:this.handleOnClick}),n("div",{key:"e7d7bc40cc1b6d3157b634dd188261631c35689d",class:"askTimmy-scroll-to-bottom hide",onClick:()=>{requestAnimationFrame((()=>{this.scrollToBottom()}))}},n(w,{key:"16647edf913126d20f2a5f8849378fa18b671fa9"})))),n("footer",{key:"60e788ab9a2b09cde1b7e77949971a3a32ef5162"},!this.productRelatedQuestion&&!this.isPhotoUploadBtnClicked&&!this.photoSearchCroppedImg&&!this.isPhotoUploadBtnClicked&&!this.isFeedbackSubmitted&&this.isFeedbackCaptured&&((null===(A=this.messages)||void 0===A?void 0:A.some((t=>"system"===t.type)))||this.isAdmin)&&"show"!==this.endChatModal.status&&n("div",{key:"8c64cf04251651228c4b3d0bee70e6cc4abf2c3c",class:"askTimmy-feedback"},this.renderFeedback()," "),this.showFeedbackResponseModal&&this.renderResponseModal(),(!this.productRelatedQuestion||"QR"!==this.productRelatedQuestion.type)&&!this.isPhotoUploadBtnClicked&&!this.photoSearchCroppedImg&&"show"!==this.endChatModal.status&&this.conversation&&this.conversation.length>0&&n("conversation-stater",{key:"52e39f3584f13aeae23096046681c629bd87e953",type:"footer",conversationStarters:this.conversationStarters,handleOnClick:this.handleOnClick}),(this.productRelatedQuestion&&"QR"===this.productRelatedQuestion.type||this.photoSearchCroppedImg&&this.isMsgInputBoxShown)&&"show"!==this.endChatModal.status&&n("div",{key:"ce47afa22dffa5e08b9f444d8254ee5d0f28cdc1",class:"askTimmy-question-about-product-container"},n("div",{key:"47f8da0da8f51f760de3f60f392ceaeb48c25866",class:"askTimmy-question-about-product-content"},n("div",{key:"6f9d4fdbc42a94c16dc957d528e9c6441e4b94f9",class:"askTimmy-question-about-product-img",style:{background:this.productRelatedQuestion?`url(${this.productRelatedQuestion.imageUrl})`:"#f2f2f2",flexShrink:this.photoSearchCroppedImg?"0":void 0,height:this.photoSearchCroppedImg?"80px":void 0,width:this.photoSearchCroppedImg?"80px":void 0}},this.photoSearchCroppedImg?n("img",{class:"askTimmy-question-about-photo-img",src:this.photoSearchCroppedImg}):n("span",null)),n("div",{key:"45c7cc4e1dda5a531f10e5ebe2f30c4f01510567",class:"askTimmy-question-about-product-message"},this.productRelatedQuestion?null===(E=null===(O=this.translation)||void 0===O?void 0:O.assistant)||void 0===E?void 0:E.questionAboutProductMessage:null===(K=null===(P=this.translation)||void 0===P?void 0:P.photoSearch)||void 0===K?void 0:K.questionAboutPhotoMessage)),n("div",{key:"2b41f5164e4021878604545fabb670091d0bc5ec",class:"askTimmy-question-about-product-close",onClick:()=>{this.productRelatedQuestion?this.productRelatedQuestion=void 0:this.photoSearchCroppedImg=void 0}},n(v,{key:"97137326fefab84c63334f90d12d39d80876269f"}))),n("div",{key:"cc4e107ec517e2b9f80abaf00e573f71030a211f",class:`askTimmy-end-chat-modal askTimmy-${this.endChatModal.status}`},n("div",{key:"2662305d9d9921665735bb39b958721526897027",class:"askTimmy-end-chat-modal-container"},n("div",{key:"3805ea27a0d3ee6502d55e765a5d09705d589a08",class:"askTimmy-end-chat-modal-content"},this.endChatModal.message),n("div",{key:"7ada83af016a029c18777f6e35554e5d7e294cae",class:"askTimmy-end-chat-modal-buttons"},!this.endChatModal.hideCancelBtn&&n("div",{key:"08867f3be6286b61647af42daba79ca7c7a43f27",class:"askTimmy-end-chat-cancel-button",onClick:()=>{this.endChatModal=Object.assign(Object.assign({},this.endChatModal),{status:"hide"})}},null===(U=null===(I=this.translation)||void 0===I?void 0:I.assistant)||void 0===U?void 0:U.cancel),!this.endChatModal.hideEndChatBtn&&n("div",{key:"7cfcfc34a73ecb9a1a4aa6a61a5a6e766a1df1db",class:"askTimmy-end-chat-button",onClick:()=>{this.endChatModal=Object.assign(Object.assign({},this.endChatModal),{status:"hide"}),this.closeChat()}},null===(q=null===(G=this.translation)||void 0===G?void 0:G.assistant)||void 0===q?void 0:q.endChat),!this.endChatModal.hideCloseBtn&&n("div",{key:"777383c3a556b19317a38fd07276eaf7ccaeb4d5",class:"askTimmy-end-chat-button",onClick:()=>{this.endChatModal=Object.assign(Object.assign({},this.endChatModal),{status:"hide"})}},null===(Y=null===(H=this.translation)||void 0===H?void 0:H.assistant)||void 0===Y?void 0:Y.close)))),this.isMsgInputBoxShown&&n("chat-text-box",{key:"dfb5674008e6e60d61b81c50db349e97c422b2fb",styling:Object.assign({},this.styling),translation:Object.assign({},this.translation),sendMessage:this.sendMessage,waitingForSystemResponse:this.waitingForSystemResponse,placement:"onChat",hideUploadIcon:this.hideImageUpload,handleOnUploadClick:()=>{this.isPhotoUploadBtnClicked=!0},isVoiceInputEnabled:this.isVoiceInputEnabled,voiceInputLanguage:this.voiceInputLanguage})))}get refElement(){return e(this)}static get watchers(){return{messages:["verifyMessage"],streamingMessages:["processStreamingMessages"],repliesLimitStatus:["checkRepliesLimitStatus"],message:["sendMessage"],conversationStarter:["updateConversationStarter"]}}};E.style=".askTimmy-chat-container {\r\n  width: 440px;\r\n  overflow: hidden;\r\n  border-radius: var(--assistant-border-radius);\r\n  height: 100%;\r\n  /* max-height: 800px; */\r\n  pointer-events: auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  opacity: 0;\r\n  background: var(--assistant-bg-color);\r\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 15px;\r\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 1px 5px\r\n    /* box-shadow: rgba(50, 50, 93, 0.25) 0px 20px 10px -20px, rgba(0, 0, 0, 0.3) 0px -20px 20px -30px, rgba(10, 37, 64, 0.35) 0px -2px 4px 0px inset; */\r\n}\r\n\r\n.askTimmy-chat-container.askTimmy-popup {\r\n  animation: 200ms ease-out 0ms 1 normal forwards running toShow, 500ms ease-out 0ms 1 normal forwards running downToup;\r\n}\r\n\r\n.askTimmy-chat-container:not(.askTimmy-admin).slide {\r\n  animation: toShow 800ms ease 0ms 1 normal forwards running, rightToLeft 1s ease 0ms 1 normal forwards running;\r\n}\r\n\r\n.askTimmy-chat-container.askTimmy-admin {\r\n  animation: toShow 800ms ease 0ms 1 normal forwards running;\r\n  width: 100%;\r\n}\r\n\r\n.askTimmy-chat-window-header {\r\n  padding: 12px 12px;\r\n  box-shadow: 0 2px 3px rgb(173 173 173 / 16%);\r\n  position: sticky;\r\n  background: var(--header-bg-color)\r\n}\r\n\r\n.askTimmy-header-container {\r\n  display: flex;\r\n  flex-shrink: 0;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  color: var(--header-color);\r\n}\r\n\r\n.askTimmy-heading-content {\r\n  line-height: 1.4;\r\n}\r\n\r\n.askTimmy-sub-heading {\r\n  font-size: 12px;\r\n}\r\n\r\n.askTimmy-header-container .askTimmy-action-buttons svg path {\r\n  fill: var(--header-color);\r\n}\r\n\r\n.askTimmy-header-content {\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-chat-icon {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  background-size: cover !important;\r\n  background-repeat: no-repeat !important;\r\n  /* box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 10px; */\r\n}\r\n\r\n.askTimmy-chat-icon-container {\r\n  position: relative;\r\n}\r\n\r\n.askTimmy-chat-icon-container::before {\r\n  content: '';\r\n  width: 12px;\r\n  height: 12px;\r\n  background: rgba(0, 189, 42, 1);\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  bottom: 1px;\r\n  right: 1px;\r\n  border: 2px solid white;\r\n}\r\n\r\n.askTimmy-chat-icon-container.askTimmy-hide-green::before {\r\n  display: none;\r\n}\r\n\r\n.askTimmy-chat-icon img {\r\n  width: 50px;\r\n  height: 50px;\r\n  object-fit: cover;\r\n}\r\n\r\n.askTimmy-heading {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  flex: 1 1 0%;\r\n}\r\n\r\n.askTimmy-action-buttons {\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.askTimmy-close-button,\r\n.askTimmy-minimize-button,\r\n.askTimmy-question-about-product-close {\r\n  cursor: pointer;\r\n  /* background: #f4f4f4; */\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-close-button svg {\r\n  width: 12px;\r\n  height: 12px;\r\n}\r\n\r\n.askTimmy-minimize-button svg {\r\n  width: 15px;\r\n  height: 15px;\r\n}\r\n\r\n.askTimmy-chat-window {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n  font-size: 15px;\r\n  scrollbar-width: none;\r\n  margin-bottom: 16px;\r\n  position: relative;\r\n  overflow-y: scroll;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.askTimmy-photo-search-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  height: 50px;\r\n}\r\n\r\n.askTimmy-photo-search-back-icon {\r\n  cursor: pointer;\r\n  height: 24px;\r\n}\r\n\r\n.askTimmy-chat-window.hide {\r\n  opacity: 0.3;\r\n  pointer-events: none;\r\n}\r\n\r\n.askTimmy-chat-assistant-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 40px 22px;\r\n  text-align: center;\r\n  gap: 5px;\r\n}\r\n\r\n.askTimmy-chat-assistant-icon {\r\n  height: 60px;\r\n  width: 80px;\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n  border-radius: 50%;\r\n  background-size: cover !important;\r\n  background-repeat: no-repeat !important;\r\n}\r\n\r\n.chat-assistant-title {\r\n  text-overflow: ellipsis;\r\n  width: 100%;\r\n  margin: 0px;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  line-height: 24px;\r\n  color: var(--assistant-color);\r\n}\r\n\r\n\r\n\r\n.askTimmy-messages {\r\n  height: 80%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  font-size: 13px;\r\n}\r\n\r\n.askTimmy-chat-assistant-description {\r\n  color: var(--assistant-color);\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  word-break: break-word;\r\n  font-size: 13px;\r\n  font-weight: 400;\r\n  line-height: 20px;\r\n  display: -webkit-box;\r\n  margin: 0px;\r\n}\r\n\r\n.askTimmy-message-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start !important;\r\n  gap: 2px;\r\n}\r\n\r\n.askTimmy-message-loading-bar {\r\n  box-sizing: border-box;\r\n  -webkit-font-smoothing: antialiased;\r\n  -webkit-tap-highlight-color: transparent;\r\n  width: 10em;\r\n  height: 10px;\r\n  margin: 0.3em;\r\n  border-radius: 5px;\r\n  background: var(--system-message-color);\r\n  opacity: 0.1;\r\n  animation: 1.5s linear 0s infinite normal none running loading-animation;\r\n}\r\n\r\n.askTimmy-message-loading-bar.second {\r\n  width: 8em;\r\n}\r\n\r\n\r\n.askTimmy-message {\r\n  max-width: 84%;\r\n  word-wrap: break-word;\r\n  margin-bottom: 8px;\r\n  padding: 12px;\r\n  border-radius: 10px;\r\n  align-items: center;\r\n  display: flex;\r\n  width: fit-content;\r\n  font-weight: 450;\r\n  line-height: 1.4;\r\n}\r\n\r\n.askTimmy-user-message-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n  align-items: flex-end;\r\n}\r\n\r\n.askTimmy-user-message-content {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  gap: 10px\r\n}\r\n\r\n.askTimmy-user-error-message {\r\n  font-size: 10px;\r\n  color: #ff0000ba;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  gap: 3px;\r\n  cursor: pointer;\r\n}\r\n\r\n.user {\r\n  align-self: flex-end;\r\n  background-color: var(--user-message-bg-color);\r\n  color: var(--user-message-color);\r\n  animation: toShow 1s ease;\r\n}\r\n\r\n.user.askTimmy-border-radius-2 {\r\n  border-top-right-radius: 3px\r\n}\r\n\r\n.system.askTimmy-border-radius-2 {\r\n  border-top-left-radius: 3px\r\n}\r\n\r\n.system {\r\n  align-self: flex-start;\r\n  background-color: var(--system-message-bg-color);\r\n  color: var(--system-message-color);\r\n  flex-direction: column;\r\n  animation: toShow 1s ease;\r\n  overflow: hidden;\r\n}\r\n\r\n.system img {\r\n  width: 100%;\r\n  border-radius: 8px;\r\n}\r\n\r\n.system>* {\r\n  padding: 0 12px;\r\n  margin: 5px;\r\n  display: inline;\r\n  /* display: flex;\r\n  flex-direction: column;\r\n  gap: 10px; */\r\n  font-weight: 500;\r\n  line-height: 1.5;\r\n  width: 100%;\r\n  /* white-space: normal; */\r\n}\r\n\r\n.askTimmy-system-message-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.askTimmy-chat-message-date {\r\n  text-align: center;\r\n  font-size: 10px;\r\n  color: rgba(176, 176, 176, 1);\r\n  font-weight: 400;\r\n}\r\n\r\n.askTimmy-chat-message-time {\r\n  font-size: 10px;\r\n  font-weight: 400;\r\n  color: rgba(176, 176, 176, 1);\r\n  opacity: 0;\r\n}\r\n\r\n.askTimmy-user-message-content:hover .askTimmy-chat-message-time {\r\n  opacity: 1;\r\n}\r\n\r\n.askTimmy-system-message-container:hover .askTimmy-chat-message-time {\r\n  opacity: 1;\r\n}\r\n\r\n.similar-product-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 10px;\r\n  position: relative;\r\n  padding: 12px 12px 20px 12px;\r\n}\r\n\r\n\r\n\r\n.askTimmy-similar-product-icon {\r\n  width: 40px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  background-color: white;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-similar-product-icon svg {\r\n  width: 25px;\r\n  height: 25px;\r\n}\r\n\r\n.askTimmy-similar-product-image {\r\n  width: 30px;\r\n  height: 30px;\r\n  margin-left: 5px;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  background-size: cover !important;\r\n  background-repeat: no-repeat !important;\r\n}\r\n\r\n.askTimmy-qa-product-container {\r\n  display: flex;\r\n  gap: 10px\r\n}\r\n\r\n.askTimmy-qa-product-container .askTimmy-product-image {\r\n  width: 100%;\r\n  height: 34px;\r\n  max-width: 34px;\r\n  min-width: 34px;\r\n  border-radius: 50%;\r\n  background-size: cover !important;\r\n  background-repeat: no-repeat !important;\r\n}\r\n\r\n.askTimmy-photo-search-img {\r\n  height: 100px;\r\n  border-radius: 16px 16px 0 16px;\r\n}\r\n\r\n.chat-assistant-avatar {\r\n  height: 28px;\r\n  width: 28px;\r\n  min-width: 28px;\r\n  box-sizing: border-box;\r\n  box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.04), 0 0 0 1px rgba(0, 0, 0, 0.02);\r\n  overflow: hidden;\r\n  border-radius: 50%;\r\n  background: #f4f4f4;\r\n  align-self: end;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.chat-assistant-avatar img {\r\n  height: 28px;\r\n  width: 28px;\r\n}\r\n\r\n\r\n.askTimmy-system-messages,\r\n.askTimmy-user-messages {\r\n  width: 100%;\r\n  display: flex;\r\n  gap: 10px;\r\n  flex-direction: column;\r\n}\r\n\r\n.askTimmy-chat-feedback-container {\r\n  width: 60%;\r\n  height: 90px;\r\n  box-shadow: 0px 0px 5px 0px rgba(164, 164, 164, 0.25);\r\n  margin-left: 3px;\r\n  margin-bottom: 5px;\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-direction: column;\r\n  color: rgba(64, 147, 222, 1);\r\n  font-weight: 500;\r\n}\r\n\r\n.askTimmy-chat-feedback-content {\r\n  line-height: 1.5;\r\n}\r\n\r\n.askTimmy-chat-feedback-rating {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.askTimmy-chat-feedback-rating .rating-star {\r\n  cursor: pointer;\r\n}\r\n\r\n.askTimmy-chat-feedback-rating .rating-star.active svg>path {\r\n  fill: #23A8FF;\r\n}\r\n\r\n.askTimmy-chat-container footer {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.askTimmy-chat-container footer:has(div.askTimmy-question-about-product-container) {\r\n  box-shadow: 0px 0px 10px 1px rgba(194, 194, 194, 0.25);\r\n  border-radius: 20px;\r\n}\r\n\r\n.askTimmy-end-chat-modal {\r\n  position: relative;\r\n  height: 40px;\r\n  top: -10px;\r\n  display: none;\r\n}\r\n\r\n.askTimmy-end-chat-modal-container {\r\n  min-height: 120px;\r\n  border-radius: 20px;\r\n  box-shadow: 0 -5px 10px rgba(194, 194, 194, 0.25);\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  font-size: 15px;\r\n  position: absolute;\r\n  width: 100%;\r\n  display: flex;\r\n  background-color: #fff;\r\n}\r\n\r\n.askTimmy-end-chat-modal.askTimmy-show {\r\n  display: flex;\r\n  z-index: 3;\r\n  animation: 200ms ease-out 0ms 1 normal forwards running toShow, 200ms ease-out 0ms 1 normal forwards running downToup;\r\n}\r\n\r\n.askTimmy-end-chat-modal.hide {\r\n  z-index: 3;\r\n  animation: 300ms ease-out 0ms 1 normal forwards running toHide, 400ms ease-out 0ms 1 normal forwards running upToDown;\r\n}\r\n\r\n.askTimmy-end-chat-modal-content {\r\n  font-weight: 450;\r\n  text-align: center;\r\n  line-height: 1.2;\r\n  color: black;\r\n  padding: 10px;\r\n}\r\n\r\n.askTimmy-end-chat-modal-buttons {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  gap: 10px;\r\n}\r\n\r\n.askTimmy-end-chat-modal-buttons div {\r\n  width: 150px;\r\n  height: 42px;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-end-chat-button {\r\n  background: #131313;\r\n  color: white;\r\n}\r\n\r\n.askTimmy-end-chat-cancel-button {\r\n  background: #F0F0F0;\r\n  color: black;\r\n}\r\n\r\n.askTimmy-question-about-product-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 15px 15px 0 15px\r\n}\r\n\r\n.askTimmy-question-about-product-content {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-question-about-product-img {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-size: cover !important;\r\n  border-radius: 8px;\r\n}\r\n\r\n.askTimmy-question-about-product-message {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.askTimmy-question-about-product-close {\r\n  background: #f4f4f4;\r\n  width: 22px;\r\n  height: 22px;\r\n}\r\n\r\n.askTimmy-question-about-product-close svg {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n.askTimmy-current-page-info {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-current-page-info .line {\r\n  height: 2px;\r\n  width: 10%;\r\n  background-color: rgba(200, 200, 200, 1);\r\n}\r\n\r\n.askTimmy-current-page-info .info {\r\n  font-size: 10px;\r\n  width: 100%;\r\n  text-align: center;\r\n  -webkit-line-clamp: 1;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.askTimmy-scroll-to-bottom {\r\n  position: fixed;\r\n  bottom: 2%;\r\n  right: 50%;\r\n  left: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  box-shadow: 2px 2px 10.800000190734863px 0px rgba(13, 13, 13, 0.25);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: #fff;\r\n  cursor: pointer;\r\n  animation: toShow 800ms ease 0ms 1 normal forwards running;\r\n  display: none;\r\n}\r\n\r\n.askTimmy-scroll-to-bottom.hide {\r\n  display: none;\r\n}\r\n\r\n.askTimmy-question-about-photo-img {\r\n  height: 80px;\r\n  width: 80px;\r\n  border-radius: 16px;\r\n  object-fit: contain;\r\n  background: #f7f7f7;\r\n}\r\n\r\n.askTimmy-bundle-preview-container {\r\n  padding: 0 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.askTimmy-bundle-product-img-container {\r\n  height: 50px;\r\n}\r\n\r\n.askTimmy-bundle-stacking-img {\r\n  display: flex;\r\n  width: 60px;\r\n  max-width: 60px;\r\n  position: relative;\r\n}\r\n\r\n.askTimmy-bundle-product-img {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 8px;\r\n  object-fit: contain;\r\n  border: 0.4px solid rgba(231, 231, 231, 1);\r\n  background: white;\r\n  position: absolute;\r\n}\r\n\r\n.askTimmy-bundle-total-info {\r\n  font-weight: bold;\r\n}\r\n\r\n.askTimmy-bundle-preview-content {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.askTimmy-bundle-preview-add-to-cart-button {\r\n  height: 40px;\r\n  text-align: center;\r\n  border-radius: 8px;\r\n  color: white;\r\n  background-color: var(--user-message-bg-color);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  width: 160px;\r\n}\r\n\r\n.askTimmy-bundle-preview-add-to-cart-button svg {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\n.askTimmy-toast-message-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 90px;\r\n  opacity: 0;\r\n}\r\n\r\n.askTimmy-toast-message-container.askTimmy-show {\r\n  z-index: 99;\r\n  animation: 800ms cubic-bezier(0.25, 0.1, 0.25, 1) 0ms 1 normal forwards toastShow\r\n}\r\n\r\n.askTimmy-toast-message-container.askTimmy-hide {\r\n  animation: 300ms cubic-bezier(0.25, 0.1, 0.25, 1) 0ms 1 normal forwards running toastHide;\r\n}\r\n\r\n@keyframes toastShow {\r\n  0% {\r\n    transform: translateY(-20px);\r\n  }\r\n\r\n  100% {\r\n    transform: translateY(0px);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes toastHide {\r\n  0% {\r\n    transform: translateY(0px);\r\n    opacity: 1;\r\n  }\r\n\r\n\r\n  100% {\r\n    transform: translateY(-50px);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.askTimmy-toast-message-container-inner {\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 50px;\r\n  width: 340px;\r\n  border: 1px solid rgba(4, 129, 81, 1);\r\n  box-shadow: 0px 4px 4.6px 0px rgba(192, 192, 192, 0.25);\r\n  background: rgba(245, 255, 245, 1);\r\n  border-radius: 8px;\r\n  padding: 14px 12px;\r\n}\r\n\r\n.askTimmy-toast-message-container-inner.askTimmy-feedback-toast {\r\n  justify-content: center;\r\n}\r\n\r\n.askTimmy-toast-message-container-inner.askTimmy-failed {\r\n  border: 1px solid rgb(255 169 151);\r\n  background: rgb(255 251 245);\r\n}\r\n\r\n.askTimmy-toast-message-content {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.askTimmy-toast-message-icon {\r\n  display: flex;\r\n}\r\n\r\n.askTimmy-toast-message-text {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  text-overflow: ellipsis;\r\n  -webkit-line-clamp: 2;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  line-height: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.askTimmy-toast-message-container-inner.askTimmy-failed .askTimmy-toast-message-text {\r\n  color: #ff0000ba;\r\n}\r\n\r\n.askTimmy-toast-message-close-button svg {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n.askTimmy-toast-message-container-inner.askTimmy-failed .askTimmy-toast-message-icon svg {\r\n  width: 15px;\r\n  height: 15px;\r\n}\r\n\r\n.askTimmy-choices-btn-container {\r\n  width: 84%;\r\n  display: flex;\r\n  gap: 4px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.askTimmy-choice-button {\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  text-align: center;\r\n  min-width: 80px;\r\n  border: 1px solid var(--user-message-bg-color);\r\n  color: var(--user-message-bg-color);\r\n}\r\n\r\n@media screen and (-webkit-min-device-pixel-ratio:0) {\r\n\r\n  .askTimmy-chat-container select,\r\n  textarea,\r\n  input {\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n@keyframes toShow {\r\n  0% {\r\n    opacity: 0;\r\n    display: none;\r\n  }\r\n\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes toHide {\r\n  0% {\r\n    display: flex;\r\n  }\r\n\r\n  100% {\r\n    display: none;\r\n  }\r\n}\r\n\r\n\r\n@keyframes upToDown {\r\n  0% {\r\n    transform: translateY(0px);\r\n  }\r\n\r\n  100% {\r\n    transform: translateY(200px);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n@keyframes downToup {\r\n  0% {\r\n    transform: translateY(50px);\r\n  }\r\n\r\n  100% {\r\n    transform: translateY(0px);\r\n  }\r\n}\r\n\r\n\r\n@keyframes rightToLeft {\r\n  0% {\r\n    transform: translatex(50px);\r\n  }\r\n\r\n  50% {\r\n    transform: translatex(-15px);\r\n  }\r\n\r\n  100% {\r\n    transform: translatex(0px);\r\n  }\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n  .askTimmy-chat-container {\r\n    border-radius: 0;\r\n    width: 100%;\r\n  }\r\n\r\n  .askTimmy-bundle-preview-add-to-cart-button {\r\n    width: 120px;\r\n    line-height: 1;\r\n  }\r\n\r\n}\r\n\r\n\r\n@keyframes loading-animation {\r\n\r\n  50% {\r\n    opacity: 0;\r\n  }\r\n\r\n}\r\n\r\n\r\n.askTimmy-chat-feedback-content {\r\n  font-size: 14px;\r\n  color: var(--feedback-color, #121212);\r\n  text-align: center;\r\n}\r\n\r\n.askTimmy-chat-feedback-actions {\r\n  display: flex;\r\n  gap: 2px;\r\n}\r\n\r\n.askTimmy-feedback-thumbs-container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 5px;\r\n  background: transparent;\r\n  border-radius: 15px;\r\n  transition: border 0.2s ease;\r\n  max-height: 42px;\r\n  pointer-events: auto;\r\n  gap: 4px;\r\n}\r\n\r\n.askTimmy-feedback-thumbs-container:hover {\r\n  border-radius: 10px;\r\n  opacity: 0.6;\r\n  transform: scale(1.05);\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.askTimmy-feedback-thumbs {\r\n  padding: 4px;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n  transition: all 0.2s ease;\r\n  font-size: 8px;\r\n  font-weight: 700;\r\n  text-align: center;\r\n  display: flex;\r\n  white-space: nowrap;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.askTimmy-message-feedback-icon {\r\n  font-size: 15px;\r\n  opacity: 0.7;\r\n}\r\n\r\n.askTimmy-response-modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n  z-index: 1000;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.askTimmy-response-modal.show {\r\n  opacity: 1;\r\n  visibility: visible;\r\n}\r\n\r\n.askTimmy-response-modal-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  width: 100%;\r\n  box-sizing: content-box;\r\n  max-width: 400px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  transform: translateY(20px);\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.askTimmy-response-modal.show .askTimmy-response-modal-container {\r\n  transform: translateY(0);\r\n}\r\n\r\n.askTimmy-response-modal-header {\r\n  display: flex;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.askTimmy-response-modal-title {\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  width: 100%;\r\n}\r\n\r\n.askTimmy-response-modal-close {\r\n  display: flex;\r\n  cursor: pointer;\r\n  padding: 8px;\r\n}\r\n\r\n.askTimmy-response-modal-close svg {\r\n  width: 12px;\r\n  height: 12px;\r\n}\r\n\r\n.askTimmy-response-modal-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n\r\n.askTimmy-response-option-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n}\r\n\r\n.askTimmy-response-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  background: none;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  text-align: left;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.askTimmy-response-option-checkbox.not-selected {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid #b4adad;\r\n  border-radius: 20%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.askTimmy-response-option-checkbox.selected {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid #1b1a1a;\r\n  border-radius: 20%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n  border-color: var(--system-message-color);\r\n  background: var(--system-message-color);\r\n}\r\n\r\n.askTimmy-response-option-checkbox svg {\r\n  width: 12px;\r\n  height: 12px;\r\n  fill: white;\r\n}\r\n\r\n\r\n\r\n.askTimmy-response-option:hover .askTimmy-response-option-checkbox {\r\n  border-color: var(--system-message-color);\r\n}\r\n\r\n.askTimmy-response-option-text {\r\n  flex: 1;\r\n  line-height: 1.4;\r\n}\r\n\r\n\r\n.askTimmy-response-option.selected .askTimmy-response-option-checkbox {\r\n  border-color: var(--system-message-color);\r\n}\r\n\r\n.askTimmy-feedback-textarea-container {\r\n  font-size: 8px;\r\n  margin-top: 4px;\r\n  padding: 0 4px;\r\n}\r\n\r\n\r\n.askTimmy-feedback-submit-button {\r\n  margin-top: 8px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  text-align: center;\r\n}\r\n\r\n.askTimmy-feedback-submit-button:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\n.askTimmy-feedback-submit-button.disabled {\r\n  background: #e0e0e0;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.askTimmy-feedback-container {\r\n  margin-right: 4px;\r\n  position: absolute;\r\n  bottom: 96px;\r\n  right: 8px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 10px;\r\n  height: 50px;\r\n  width: 100%;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n  background: transparent;\r\n  z-index: 100;\r\n  pointer-events: none;\r\n}\r\n\r\n.askTimmy-feedback-component {\r\n  pointer-events: auto;\r\n  /* Re-enable clicks for the feedback buttons */\r\n}\r\n\r\n.askTimmy-feedback-component.show {\r\n  flex: 1;\r\n  display: flex;\r\n  height: 41.6px;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n  gap: 5px;\r\n  width: 100%;\r\n  text-align: right;\r\n  opacity: 1;\r\n  visibility: visible;\r\n  animation: feedbackShow 0.3s ease forwards;\r\n}\r\n\r\n.askTimmy-feedback-component.hide {\r\n  opacity: 0;\r\n  visibility: hidden;\r\n}\r\n\r\n.askTimmy-feedback-textarea {\r\n  margin-top: 12px;\r\n  margin-bottom: 8px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  height: 80px;\r\n  border: 2px solid #040404;\r\n  border-radius: 8px;\r\n  resize: none;\r\n  font-family: inherit;\r\n  font-size: small;\r\n  line-height: 1.4;\r\n  --focused-base-box-shadow: none;\r\n  outline: none;\r\n  padding: 12px;\r\n  border: 1px solid #e0e0e0;\r\n}";const P=class{constructor(i){t(this,i),this.type="footer",this.handleOnClick=void 0,this.conversationStarters=void 0}render(){var t,i,e;return n("div",{key:"87c4e50c4252062e78161d2eb29647682f206252",class:"conversation-stater-container",style:{marginLeft:"footer"===this.type?"16px":"0px"}},"footer"===this.type&&(null===(t=this.conversationStarters)||void 0===t?void 0:t.length)>1&&n("div",{key:"87063b826e3fbe9d18b57896f2dff2ae3acf9e02",class:"askTimmy-carousel-button left hide",onClick:()=>{let t=this.refElement.querySelector(".conversation-stater-buttons"),i=-150;if(t.scrollLeft+i<Math.abs(i)&&(i-=Math.abs(t.scrollLeft+i)),t.scrollLeft+i<=0){let t=this.refElement.querySelector(".askTimmy-carousel-button.left");t&&(t.classList.add("hide"),t.classList.remove("show"))}let n=this.refElement.querySelector(".askTimmy-carousel-button.right");n&&n.classList.remove("hide"),t.scrollBy({left:i,behavior:"smooth"})}},n(p,{key:"8bf01a1c2fc3938994f353098c6ae435e51d106b"})),n("div",{key:"bf3004c046b6d85d45a05e19d31beee213e71cba",class:"footer"===this.type?"conversation-stater-buttons":"conversation-stater-buttons in-chat"},(null===(i=this.conversationStarters)||void 0===i?void 0:i.length)>0&&this.conversationStarters.map((t=>n("div",{onClick:()=>this.handleOnClick("cs",t)},t.message)))),"footer"===this.type&&(null===(e=this.conversationStarters)||void 0===e?void 0:e.length)>1&&n("div",{key:"117cda0133c84b9555c96ab8acf8dfb78b051800",class:"askTimmy-carousel-button right",onClick:()=>{let t=this.refElement.querySelector(".conversation-stater-buttons"),i=t.scrollWidth-t.clientWidth,n=150;if(i-(t.scrollLeft+n)<n&&(n+=i-(t.scrollLeft+n)),t.scrollLeft+n>=i){let t=this.refElement.querySelector(".askTimmy-carousel-button.right");t&&t.classList.add("hide")}let e=this.refElement.querySelector(".askTimmy-carousel-button.left");e&&e.classList.remove("hide"),t.scrollBy({left:n,behavior:"smooth"})}},n(h,{key:"725af0df5d36da4365fef7ed1900722b8f595ca0"})))}get refElement(){return e(this)}};P.style='.conversation-stater-container{position:relative}.conversation-stater-container:hover .right{opacity:1}.conversation-stater-container:hover .left:not(.hide){opacity:1}.conversation-stater-buttons{display:flex;gap:8px;overflow-x:auto;scrollbar-width:none}.conversation-stater-buttons.in-chat{flex-direction:column}.conversation-stater-buttons div{box-sizing:border-box;border:1px dashed var(--cs-border-color);outline:none;border-radius:16px;background:var(--cs-bg-color);cursor:pointer;display:flex;justify-content:center;align-items:center;gap:5px;padding:14px;min-width:fit-content;width:fit-content;font-family:"Manrope", sans-serif;color:var(--cs-color);font-size:13px;line-height:1.2}.conversation-stater-container .askTimmy-carousel-button{opacity:0;pointer-events:auto;position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;border-radius:50%;transition:background-color 150ms ease 0s, box-shadow 150ms ease 0s, opacity 150ms ease 0s;height:30px;width:30px;cursor:pointer;background-color:#fff;color:black;box-shadow:0 1px 3px 1px rgba(0, 0, 0, 0.01), 0 0 0 1px rgba(0, 0, 0, 0.03), 0 2px 4px -3px rgba(0, 0, 0, 0.12), 0 5px 8px -8px rgba(0, 0, 0, 0.12);border:none;top:25%}.conversation-stater-container .askTimmy-carousel-button.right{right:10px;top:5px}.conversation-stater-container .askTimmy-carousel-button.left{left:10px;top:5px}.conversation-stater-container .askTimmy-carousel-button.left.hide{opacity:0}.conversation-stater-container .askTimmy-carousel-button.right.hide{opacity:0}.conversation-stater-container .askTimmy-carousel-button.right svg{margin-right:2px}';const K=class{constructor(i){t(this,i),this.imageSrc="",this.styling=void 0,this.translation=void 0,this.croppedImageSrc="",this.isDragging=!1,this.isResizing=!1,this.resizeCorner="",this.startX=0,this.startY=0,this.cropWidth=100,this.cropHeight=100,this.cropX=0,this.cropY=0,this.horizontalGap=0,this.verticalGap=0,this.minX=0,this.maxX=0,this.maxWidth=0,this.minY=0,this.maxY=0,this.maxHeight=0,this.isCropEnabled=void 0,this.isCropCompleted=void 0,this.isReplaceClicked=void 0,this.containerWidth=0}async getCroppedImage(t){return new Promise((i=>{if(this.isCropEnabled){const n=new Image;n.src=this.imageSrc,n.onload=()=>{const e=this.canvas.getContext("2d"),o=n.width/(this.img.clientWidth-2*this.horizontalGap),s=n.height/(this.img.clientHeight-2*this.verticalGap);this.canvas.width=this.cropWidth*o,this.canvas.height=this.cropHeight*s,e.drawImage(n,(this.cropX-this.horizontalGap)*o,(this.cropY-this.verticalGap)*s,this.cropWidth*o,this.cropHeight*s,0,0,this.cropWidth*o,this.cropHeight*s),i({result:this.canvas.toDataURL("image/jpeg",t)})}}else i({result:this.imageSrc})}))}handleMouseMove(t){this.handleMove(t.clientX,t.clientY)}handleTouchMove(t){const i=t.touches[0];this.handleMove(i.clientX,i.clientY)}handleMouseUp(){this.isDragging=!1,this.isResizing=!1}handleTouchEnd(){this.isDragging=!1,this.isResizing=!1}handleMove(t,i){this.isDragging?this.updateCropPosition(t,i):this.isResizing&&this.resizeCropArea(t,i)}handleMouseDown(t){this.isDragging=!0,this.startX=t.clientX-this.cropX,this.startY=t.clientY-this.cropY}handleTouchStart(t){const i=t.touches[0];this.isDragging=!0,this.startX=i.clientX-this.cropX,this.startY=i.clientY-this.cropY}handleResizeMouseDown(t,i){this.isResizing=!0,this.resizeCorner=i,this.startX=t.clientX,this.startY=t.clientY,t.stopPropagation()}handleResizeTouchStart(t,i){const n=t.touches[0];this.isResizing=!0,this.resizeCorner=i,this.startX=n.clientX,this.startY=n.clientY,t.stopPropagation()}updateCropPosition(t,i){this.cropX=Math.min(Math.max(t-this.startX,this.minX),this.maxX),this.cropY=Math.min(Math.max(i-this.startY,this.minY),this.maxY)}resizeCropArea(t,i){const n=t-this.startX,e=i-this.startY;"top-right"===this.resizeCorner&&(this.cropWidth=Math.max(Math.min(this.cropWidth+n,this.maxWidth),50),this.cropHeight=Math.max(Math.min(this.cropHeight-e,this.maxHeight),50),this.cropY=Math.min(Math.max(this.cropY+e,this.minY),this.maxY),this.calculateHorizontalConstraints(),this.calculateVerticalConstraints()),"top-left"===this.resizeCorner&&(this.cropWidth=Math.max(Math.min(this.cropWidth-n,this.maxWidth),50),this.cropHeight=Math.max(Math.min(this.cropHeight-e,this.maxHeight),50),this.cropX=Math.min(Math.max(this.cropX+n,this.minX),this.maxX),this.cropY=Math.min(Math.max(this.cropY+e,this.minY),this.maxY),this.calculateHorizontalConstraints(),this.calculateVerticalConstraints()),"bottom-right"===this.resizeCorner&&(this.cropWidth=Math.max(Math.min(this.cropWidth+n,this.maxWidth),50),this.cropHeight=Math.max(Math.min(this.cropHeight+e,this.maxHeight),50),this.calculateHorizontalConstraints(),this.calculateVerticalConstraints()),"bottom-left"===this.resizeCorner&&(this.cropWidth=Math.max(Math.min(this.cropWidth-n,this.maxWidth),50),this.cropHeight=Math.max(Math.min(this.cropHeight+e,this.maxHeight),50),this.cropX=Math.min(Math.max(this.cropX+n,this.minX),this.maxX),this.calculateHorizontalConstraints(),this.calculateVerticalConstraints()),this.startX=t,this.startY=i}calculateHorizontalConstraints(){this.minX=this.horizontalGap,this.maxX=this.containerWidth-this.horizontalGap-this.cropWidth,this.maxWidth=this.containerWidth-2*this.horizontalGap}calculateVerticalConstraints(){this.minY=this.verticalGap,this.maxY=this.containerWidth-this.verticalGap-this.cropHeight,this.maxHeight=this.containerWidth-2*this.verticalGap}initializeCalculations(){this.calculateGaps(),this.startX=this.horizontalGap,this.startY=this.verticalGap,this.cropWidth=this.containerWidth-2*this.horizontalGap-40,this.cropHeight=this.containerWidth-2*this.verticalGap-40,this.cropX=this.horizontalGap+20,this.cropY=this.verticalGap+20,this.calculateHorizontalConstraints(),this.calculateVerticalConstraints(),this.isCropEnabled=!0}calculateGaps(){const t=document.querySelector(".asktimmy-img-crop-cont img"),i=this.containerWidth,n=this.containerWidth,e=t.naturalWidth/t.naturalHeight;let o=0,s=0;e>i/n?s=n-i/e:o=i-n*e,this.horizontalGap=o/2,this.verticalGap=s/2}async handleCrop(){let t=document.querySelector("chat-window");if(t){const i=await this.getCroppedImage(.8);t.setPhotoSearchCroppedImage(i.result),t.toggleMessageInputBox(!0)}}render(){var t,i,e,s;return this.imageSrc?n("div",null,n("div",{style:{width:`${this.containerWidth}px`,height:`${this.containerWidth}px`},class:"asktimmy-img-crop-cont"},n("img",{ref:t=>this.img=t,src:this.imageSrc,style:{width:`${this.containerWidth}px`,height:`${this.containerWidth}px`}}),(this.isCropEnabled||this.isCropCompleted)&&n(o,null,n("div",{class:"asktimmy-img-crop-overlay",style:{clipPath:`polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 ${this.cropY}px, ${this.cropX}px ${this.cropY}px, ${this.cropX}px ${this.cropY+this.cropHeight}px, ${this.cropX+this.cropWidth}px ${this.cropY+this.cropHeight}px, ${this.cropX+this.cropWidth}px ${this.cropY}px, 0 ${this.cropY}px)`,background:`rgba(0, 0, 0, ${this.isCropCompleted?.9:.6})`}},n("span",null)),n("div",{class:"asktimmy-img-crop-area",style:{width:`${Math.min(this.maxWidth,this.cropWidth)}px`,height:`${Math.min(this.maxHeight,this.cropHeight)}px`,left:`${Math.min(Math.max(this.cropX,this.minX),this.maxX)}px`,top:`${Math.min(Math.max(this.cropY,this.minY),this.maxY)}px`,cursor:this.isCropCompleted?"":"move"},onMouseDown:t=>!this.isCropCompleted&&this.handleMouseDown(t),onTouchStart:t=>!this.isCropCompleted&&this.handleTouchStart(t)},!this.isCropCompleted&&n(o,null,n("div",{class:"asktimmy-resize-handle top-left",onMouseDown:t=>this.handleResizeMouseDown(t,"top-left"),onTouchStart:t=>this.handleResizeTouchStart(t,"top-left")},n("span",null)),n("div",{class:"asktimmy-resize-handle top-right",onMouseDown:t=>this.handleResizeMouseDown(t,"top-right"),onTouchStart:t=>this.handleResizeTouchStart(t,"top-right")},n("span",null)),n("div",{class:"asktimmy-resize-handle bottom-left",onMouseDown:t=>this.handleResizeMouseDown(t,"bottom-left"),onTouchStart:t=>this.handleResizeTouchStart(t,"bottom-left")},n("span",null)),n("div",{class:"asktimmy-resize-handle bottom-right",onMouseDown:t=>this.handleResizeMouseDown(t,"bottom-right"),onTouchStart:t=>this.handleResizeTouchStart(t,"bottom-right")},n("span",null))))),n("canvas",{ref:t=>this.canvas=t,style:{display:"none"}})),n("div",{class:"asktimmy-img-crop-actions"},n("div",{class:"asktimmy-img-crop-crop-cont",onClick:()=>{this.isCropEnabled?(this.isCropEnabled=!1,this.isCropCompleted=!1):(this.initializeCalculations(),this.isCropCompleted=!1)}},n(this.isCropEnabled?v:C,null)),n("div",{class:"asktimmy-img-crop-next-cont",style:{background:`${(null===(i=null===(t=this.styling)||void 0===t?void 0:t.assistant.send)||void 0===i?void 0:i.bgColor)||"black"}`},onClick:()=>this.handleCrop()},n(b,{color:null===(s=null===(e=this.styling)||void 0===e?void 0:e.assistant.send)||void 0===s?void 0:s.color})))):n(o,null)}get el(){return e(this)}};K.style=".asktimmy-img-crop-cont{position:relative;display:inline-block;overflow:hidden;border-radius:8px;background:#ebebeb}.asktimmy-img-crop-overlay{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}.asktimmy-img-crop-cont img{display:block;object-fit:contain;user-select:none;pointer-events:none}.asktimmy-img-crop-area{position:absolute;border:1px solid white;user-select:none;z-index:2}.asktimmy-img-crop-actions{display:flex;justify-content:center;gap:20px;margin:16px}.asktimmy-img-crop-crop-cont,.asktimmy-img-crop-next-cont{cursor:pointer;height:40px;width:40px;display:flex;align-items:center;justify-content:center;border:1px solid black;border-radius:50%}.asktimmy-img-crop-crop-cont .asktimmy-close-icon{width:14px;height:14px}.asktimmy-img-crop-next-cont{border:none}.asktimmy-img-crop-next-cont svg{width:28px;height:28px}.cropped-image{margin-top:20px;text-align:center}.cropped-image img{max-width:100%;border:1px solid black}.asktimmy-resize-handle{position:absolute;width:20px;height:20px;background-color:transparent}.asktimmy-resize-handle::before,.asktimmy-resize-handle::after{content:'';position:absolute;background-color:white}.asktimmy-resize-handle.top-left::before{width:4px;height:100%;left:-4px;top:-4px;cursor:nwse-resize}.asktimmy-resize-handle.top-left::after{width:100%;height:4px;left:0;top:-4px}.asktimmy-resize-handle.top-right{right:-4px;cursor:nesw-resize}.asktimmy-resize-handle.top-right::before{width:4px;height:100%;right:0;top:-4px}.asktimmy-resize-handle.top-right::after{width:100%;height:4px;right:0;top:-4px}.asktimmy-resize-handle.bottom-left{bottom:-4px;cursor:nesw-resize}.asktimmy-resize-handle.bottom-left::before{width:4px;height:100%;left:-4px;bottom:0}.asktimmy-resize-handle.bottom-left::after{width:100%;height:4px;left:0;bottom:0}.asktimmy-resize-handle.bottom-right{right:-4px;bottom:-4px;cursor:nwse-resize}.asktimmy-resize-handle.bottom-right::before{width:4px;height:100%;right:0;bottom:0}.asktimmy-resize-handle.bottom-right::after{width:100%;height:4px;right:0;bottom:0}@media only screen and (max-width: 600px){.asktimmy-resize-handle{width:32px;height:32px}}";const I=class{constructor(i){t(this,i),this.styling=void 0,this.translation=void 0,this.isAdmin=!1,this.imageSrc="",this.dragOver=!1,this.fileErrors=[]}async replaceImage(){this.imageSrc=void 0,this.fileErrors=[]}async getImageSrc(){return this.imageSrc}componentDidLoad(){this.toggleMessageInput(!1)}toggleMessageInput(t){const i=document.querySelector("chat-window");i&&i.toggleMessageInputBox(t)}getFileErrors(t){var i,n,e,o;const s=[];return t.size>10485760&&s.push(null===(n=null===(i=this.translation)||void 0===i?void 0:i.photoSearch)||void 0===n?void 0:n.fileSizeLarge),["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type)||s.push(null===(o=null===(e=this.translation)||void 0===e?void 0:e.photoSearch)||void 0===o?void 0:o.invalidFileType),s}handleFileSelect(t){if(this.isAdmin)return;const i=t.target.files[0],n=new FileReader;n.onload=()=>{const t=this.getFileErrors(i);t.length?(this.fileErrors=t,this.imageSrc=void 0):this.imageSrc=n.result},n.readAsDataURL(i)}handleDragOver(t){t.preventDefault(),this.dragOver=!0}handleDragLeave(){this.dragOver=!1}handleDrop(t){if(this.isAdmin)return;t.preventDefault(),this.dragOver=!1;const i=t.dataTransfer.files[0],n=new FileReader;n.onload=()=>{const t=this.getFileErrors(i);t.length?(this.fileErrors=t,this.imageSrc=void 0):this.imageSrc=n.result},n.readAsDataURL(i)}render(){var t,i,e,o,s,a;if(this.imageSrc){const t=document.querySelector(".askTimmy-chat-window");let i=400;if(t){const n=getComputedStyle(t);i=t.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)}return n("image-cropper",{imageSrc:this.imageSrc,containerWidth:i,styling:this.styling,translation:this.translation})}return n("div",{class:"asktimmy-photo-search-cont"},n("div",{class:"asktimmy-photo-search-illustration"},n("div",null,null===(i=null===(t=this.translation)||void 0===t?void 0:t.photoSearch)||void 0===i?void 0:i.illustrationTitle),n("img",{src:"https://lb-apps-media.s3.amazonaws.com/AskTimmy-media/photosearch_illustration.svg",style:{width:"calc(100% - 24px)"}})),n("div",{class:"asktimmy-drag-drop-zone",onDragOver:t=>this.handleDragOver(t),onDragLeave:()=>this.handleDragLeave(),onDrop:t=>this.handleDrop(t),onClick:()=>!this.isAdmin&&document.getElementById("asktimmy-drag-drop-file-input").click(),style:{cursor:this.isAdmin?"not-allowed":"pointer"}},n("input",{type:"file",id:"asktimmy-drag-drop-file-input",accept:".jpeg, .jpg, .png, .gif, .webp",onChange:t=>this.handleFileSelect(t),hidden:!0}),n("div",{class:"asktimmy-drag-drop-zone-icon"},n(g,null)),n("div",{class:"asktimmy-drag-drop-zone-caption"},null===(o=null===(e=this.translation)||void 0===e?void 0:e.photoSearch)||void 0===o?void 0:o.dragAndDropText),n("div",{class:"asktimmy-drag-drop-zone-limits"},null===(a=null===(s=this.translation)||void 0===s?void 0:s.photoSearch)||void 0===a?void 0:a.recommendedFormats),this.fileErrors.length>0&&n("div",{class:"asktimmy-photo-search-error-cont"},n("div",{class:"asktimmy-photo-search-error-icon"},n(T,null)),n("div",{class:"asktimmy-photo-search-error"},this.fileErrors.map((t=>n("div",{class:""},t)))))))}};I.style=".asktimmy-photo-search-help{user-select:none;margin:0 0 12px 0}.asktimmy-drag-drop-zone{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:12px;padding:16px;user-select:none;border:1px dashed #979797;flex-grow:1}.asktimmy-drag-drop-zone-browse{background:var(--assistant-color);border-radius:24px;width:100px;color:white;text-align:center;cursor:pointer;padding:8px 4px}.asktimmy-drag-drop-zone-browse:hover{opacity:0.8}.asktimmy-drag-drop-zone-icon{margin-top:16px}.asktimmy-drag-drop-zone-icon svg{height:28px;width:28px}.asktimmy-drag-drop-zone-separator{display:flex;align-items:center;text-align:center;width:100%;margin:24px 0}.asktimmy-drag-drop-zone-separator::before,.asktimmy-drag-drop-zone-separator::after{content:'';flex:1;border-bottom:1px solid #ccc}.asktimmy-drag-drop-zone-separator:not(:empty)::before{margin-right:16px}.asktimmy-drag-drop-zone-separator:not(:empty)::after{margin-left:16px}.asktimmy-drag-drop-zone-caption{margin-top:16px;text-align:center}.asktimmy-drag-drop-zone-limits{margin-top:12px;font-size:12px;color:#979797}.asktimmy-drag-drop-zone-click{text-decoration:underline;cursor:pointer}.asktimmy-photo-search-error-cont{color:#944444;background:#FFEBEB;font-size:12px;border-radius:16px;margin-top:12px;padding:8px;display:flex;gap:8px;align-items:center;text-align:center}.asktimmy-photo-search-error{display:flex;align-items:center;justify-content:center;gap:2px;flex-direction:column}.asktimmy-photo-search-error-icon,.asktimmy-photo-search-error-icon svg{height:16px;width:16px}.asktimmy-photo-search-error svg{height:20px;width:20px}.asktimmy-photo-search-error svg path{fill:#944444}.asktimmy-photo-search-illustration{width:100%;background:linear-gradient(108.39deg, #F9F9F9 -3.04%, #F2F2F2 125.48%);display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:12px;padding:12px;box-sizing:border-box;gap:8px;font-weight:bold;margin-bottom:12px;min-height:202px;border:1px solid #dcdcdc}.asktimmy-photo-search-cont{height:100%;display:flex;flex-direction:column}";const U=class{constructor(i){t(this,i),this.buttons=[]}render(){return this.buttons.length?n("div",{class:"askTimmy-quick-reply-buttons-container"},this.buttons.map((t=>n("div",{class:"askTimmy-quick-reply-button"},t)))):null}};U.style=".askTimmy-quick-reply-buttons-container{display:flex;flex-wrap:wrap;gap:12px;margin-left:2px}.askTimmy-quick-reply-button{height:35px;width:fit-content;border:none;background:transparent;color:rgba(64, 147, 222, 1);border-radius:8px;box-shadow:0px 0px 5px 0px rgba(164, 164, 164, 0.25);margin-bottom:3px;padding:8px 12px}";export{B as bundle_layout,j as card_layout,L as chat_bubble,N as chat_nudges,A as chat_text_box,O as chat_widget,E as chat_window,P as conversation_stater,K as image_cropper,I as photo_search,U as quick_reply_buttons}